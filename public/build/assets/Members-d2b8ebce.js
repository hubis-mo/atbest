import{A as L}from"./AdminLayout-d2fce59f.js";import{_ as N}from"./_plugin-vue_export-helper-c27b6911.js";import{i,o as s,c,w as o,a as _,t as d,b as n,f as p,d as b,F as h,e as y}from"./app-78468d3b.js";import"./DropdownLink-c7da729b.js";import"./PieChartOutlined-7a16d42c.js";const S={components:{AdminLayout:L},props:["organizations","members","users"],data(){return{dateFormat:"YYYY-MM-DD",modal:{isOpen:!1,data:{},title:"Modal",mode:""},teacherStateLabels:{},columns:[{title:"Given Name",i18n:"given_name",dataIndex:"given_name"},{title:"Family Name",i18n:"family_name",dataIndex:"family_name"},{title:"Display Name",i18n:"display_name",dataIndex:"display_name"},{title:"Login Email",i18n:"login_email",dataIndex:"login"},{title:"Avatar",dataIndex:"avatar",i18n:"avatar"},{title:"Operation",i18n:"operation",dataIndex:"operation",key:"operation"}],rules:{name_zh:{required:!0},mobile:{required:!0}},validateMessages:{required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},labelCol:{style:{width:"150px"}}}},created(){},methods:{filterOption(e,a){return a.full_name.toLowerCase().indexOf(e.toLowerCase())>=0},createRecord(){this.modal.data={},this.modal.data.organization_ids=[],this.modal.mode="CREATE",this.modal.title="create",this.modal.isOpen=!0},editRecord(e){this.modal.data={...e},this.modal.data.organization_ids=e.organizations.map(a=>a.id),this.modal.mode="EDIT",this.modal.title="edit",this.modal.isOpen=!0},storeRecord(){this.$refs.modalRef.validateFields().then(()=>{this.$inertia.post(route("admin.members.store"),this.modal.data,{onSuccess:e=>{this.modal.data={},this.modal.isOpen=!1},onError:e=>{console.log(e)}})}).catch(e=>{console.log(e)})},updateRecord(){console.log(this.modal.data),this.$refs.modalRef.validateFields().then(()=>{this.$inertia.patch(route("admin.members.update",this.modal.data.id),this.modal.data,{onSuccess:e=>{this.modal.data={},this.modal.isOpen=!1,console.log(e)},onError:e=>{console.log(e)}})}).catch(e=>{console.log("error",e)})},deleteRecord(e){this.$inertia.delete(route("admin.members.destroy",e.id),{onSuccess:a=>{console.log(a)},onError:a=>{console.log(a)}})},createLogin(e){console.log("create login"+e.id)}}},A={class:"font-semibold text-xl text-gray-800 leading-tight"},D={class:"container mx-auto pt-5"},M={class:"bg-white relative shadow rounded-lg overflow-x-auto"},T={key:0},V=["src"],q=["src"];function B(e,a,g,Y,l,r){const f=i("a-button"),R=i("a-popconfirm"),I=i("a-table"),k=i("a-select"),m=i("a-form-item"),v=i("a-input"),E=i("a-switch"),O=i("a-date-picker"),w=i("a-col"),x=i("a-row"),z=i("a-form"),F=i("a-modal"),U=i("AdminLayout");return s(),c(U,{title:"Dashboard"},{header:o(()=>[_("h2",A,d(e.$t("members")),1)]),default:o(()=>[_("button",{onClick:a[0]||(a[0]=t=>r.createRecord()),class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded my-3"},d(e.$t("create_member")),1),_("div",D,[_("div",M,[n(I,{dataSource:g.members,columns:l.columns},{headerCell:o(({column:t})=>[p(d(t.i18n?e.$t(t.i18n):t.title),1)]),bodyCell:o(({column:t,text:$,record:u,index:G})=>[t.dataIndex=="operation"?(s(),b(h,{key:0},[n(f,{onClick:C=>r.editRecord(u)},{default:o(()=>[p(d(e.$t("edit")),1)]),_:2},1032,["onClick"]),n(R,{title:e.$t("confirm_delete_record"),"ok-text":e.$t("yes"),"cancel-text":e.$t("no"),onConfirm:C=>r.deleteRecord(u)},{default:o(()=>[n(f,null,{default:o(()=>[p(d(e.$t("delete")),1)]),_:1})]),_:2},1032,["title","ok-text","cancel-text","onConfirm"]),n(f,{onClick:C=>r.createLogin(u)},{default:o(()=>[p(d(e.$t("create_login")),1)]),_:2},1032,["onClick"])],64)):t.dataIndex=="login"?(s(),b(h,{key:1},[u.user?(s(),b("span",T,d(u.user.email),1)):y("",!0)],64)):t.dataIndex=="avatar"?(s(),b("img",{key:2,src:u.avatar_url,width:"60"},null,8,V)):(s(),b(h,{key:3},[p(d(u[t.dataIndex]),1)],64))]),_:1},8,["dataSource","columns"])])]),n(F,{visible:l.modal.isOpen,"onUpdate:visible":a[11]||(a[11]=t=>l.modal.isOpen=t),title:e.$t(l.modal.title),width:"60%"},{footer:o(()=>[l.modal.mode=="EDIT"?(s(),c(f,{key:"Update",type:"primary",onClick:a[9]||(a[9]=t=>r.updateRecord())},{default:o(()=>[p(d(e.$t("update")),1)]),_:1})):y("",!0),l.modal.mode=="CREATE"?(s(),c(f,{key:"Store",type:"primary",onClick:a[10]||(a[10]=t=>r.storeRecord())},{default:o(()=>[p(d(e.$t("add")),1)]),_:1})):y("",!0)]),default:o(()=>[n(z,{ref:"modalRef",model:l.modal.data,name:"Teacher","label-col":{span:3},"wrapper-col":{span:16},autocomplete:"off",rules:l.rules,"validate-messages":l.validateMessages},{default:o(()=>[n(m,{label:e.$t("organizations"),name:"organization_ids"},{default:o(()=>[n(k,{value:l.modal.data.organization_ids,"onUpdate:value":a[1]||(a[1]=t=>l.modal.data.organization_ids=t),mode:"multiple","show-search":"","filter-option":r.filterOption,options:g.organizations,fieldNames:{value:"id",label:"full_name"}},null,8,["value","filter-option","options"])]),_:1},8,["label"]),n(m,{label:e.$t("given_name"),name:"given_name"},{default:o(()=>[n(v,{value:l.modal.data.given_name,"onUpdate:value":a[2]||(a[2]=t=>l.modal.data.given_name=t)},null,8,["value"])]),_:1},8,["label"]),n(m,{label:e.$t("middle_name"),name:"middle_name"},{default:o(()=>[n(v,{value:l.modal.data.middle_name,"onUpdate:value":a[3]||(a[3]=t=>l.modal.data.middle_name=t)},null,8,["value"])]),_:1},8,["label"]),n(m,{label:e.$t("family_name"),name:"family_name"},{default:o(()=>[n(v,{value:l.modal.data.family_name,"onUpdate:value":a[4]||(a[4]=t=>l.modal.data.family_name=t)},null,8,["value"])]),_:1},8,["label"]),n(x,{span:24},{default:o(()=>[n(w,{span:18},{default:o(()=>[n(m,{label:e.$t("email"),"label-col":{span:4},name:"email"},{default:o(()=>[n(v,{value:l.modal.data.email,"onUpdate:value":a[5]||(a[5]=t=>l.modal.data.email=t)},null,8,["value"])]),_:1},8,["label"]),n(m,{label:e.$t("gender"),"label-col":{span:4},name:"gender"},{default:o(()=>[n(E,{checked:l.modal.data.gender,"onUpdate:checked":a[6]||(a[6]=t=>l.modal.data.gender=t),checkedValue:1,unCheckedValue:0},null,8,["checked"])]),_:1},8,["label"]),n(m,{label:e.$t("dob"),"label-col":{span:4},name:"dob"},{default:o(()=>[n(O,{value:l.modal.data.dob,"onUpdate:value":a[7]||(a[7]=t=>l.modal.data.dob=t),format:l.dateFormat,valueFormat:l.dateFormat},null,8,["value","format","valueFormat"])]),_:1},8,["label"]),l.modal.data.user_id?(s(),c(m,{key:0,label:e.$t("users"),"label-col":{span:4},name:"user_id"},{default:o(()=>[_("p",null,d(l.modal.data.user.email),1)]),_:1},8,["label"])):(s(),c(m,{key:1,label:e.$t("users"),"label-col":{span:4},name:"user_id"},{default:o(()=>[n(k,{value:l.modal.data.user_id,"onUpdate:value":a[8]||(a[8]=t=>l.modal.data.user_id=t),"show-search":"",options:g.users,fieldNames:{value:"id",label:"email"}},null,8,["value","options"])]),_:1},8,["label"]))]),_:1}),n(w,{span:6},{default:o(()=>[_("img",{src:l.modal.data.avatar_url,width:"200"},null,8,q)]),_:1})]),_:1})]),_:1},8,["model","rules","validate-messages"])]),_:1},8,["visible","title"])]),_:1})}const Q=N(S,[["render",B]]);export{Q as default};
