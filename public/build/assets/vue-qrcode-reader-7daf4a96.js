import{m as kt,r as Re,O as ia,P as sa,B as At,q as Mt,s as ca,o as Rt,d as Wt,a as et,k as ua,C as la,N as da,l as Ar,z as tt}from"./app-78468d3b.js";var Mr=(r,a,o)=>{if(!a.has(r))throw TypeError("Cannot "+o)},wr=(r,a,o)=>(Mr(r,a,"read from private field"),o?o.call(r):a.get(r)),fa=(r,a,o)=>{if(a.has(r))throw TypeError("Cannot add the same private member more than once");a instanceof WeakSet?a.add(r):a.set(r,o)},ha=(r,a,o,c)=>(Mr(r,a,"write to private field"),c?c.call(r,o):a.set(r,o),o);const br=["aztec","code_128","code_39","code_93","codabar","data_matrix","ean_13","ean_8","itf","pdf417","qr_code","upc_a","upc_e","unknown"];function pa(r){if(xr(r))return{width:r.naturalWidth,height:r.naturalHeight};if(Dr(r))return{width:r.width.baseVal.value,height:r.height.baseVal.value};if(jr(r))return{width:r.videoWidth,height:r.videoHeight};if(Rr(r))return{width:r.width,height:r.height};if(Fr(r))return{width:r.displayWidth,height:r.displayHeight};if(kr(r))return{width:r.width,height:r.height};if(Wr(r))return{width:r.width,height:r.height};throw new TypeError("The provided value is not of type '(Blob or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or ImageData or OffscreenCanvas or SVGImageElement or VideoFrame)'.")}function xr(r){try{return r instanceof HTMLImageElement}catch{return!1}}function Dr(r){try{return r instanceof SVGImageElement}catch{return!1}}function jr(r){try{return r instanceof HTMLVideoElement}catch{return!1}}function kr(r){try{return r instanceof HTMLCanvasElement}catch{return!1}}function Rr(r){try{return r instanceof ImageBitmap}catch{return!1}}function Wr(r){try{return r instanceof OffscreenCanvas}catch{return!1}}function Fr(r){try{return r instanceof VideoFrame}catch{return!1}}function Ir(r){try{return r instanceof Blob}catch{return!1}}function ma(r){try{return r instanceof ImageData}catch{return!1}}function va(r,a){try{const o=new OffscreenCanvas(r,a);if(o.getContext("2d")instanceof OffscreenCanvasRenderingContext2D)return o;throw void 0}catch{const c=document.createElement("canvas");return c.width=r,c.height=a,c}}async function Ur(r){if(xr(r)&&!await ba(r))throw new DOMException("Failed to load or decode HTMLImageElement.","InvalidStateError");if(Dr(r)&&!await Ca(r))throw new DOMException("Failed to load or decode SVGImageElement.","InvalidStateError");if(Fr(r)&&Ta(r))throw new DOMException("VideoFrame is closed.","InvalidStateError");if(jr(r)&&(r.readyState===0||r.readyState===1))throw new DOMException("Invalid element or state.","InvalidStateError");if(Rr(r)&&$a(r))throw new DOMException("The image source is detached.","InvalidStateError");const{width:a,height:o}=pa(r);if(a===0||o===0)return null;const c=va(a,o).getContext("2d");c.drawImage(r,0,0);try{return c.getImageData(0,0,a,o)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function ya(r){let a;try{if(createImageBitmap)a=await createImageBitmap(r);else if(Image){a=new Image;let o="";try{o=URL.createObjectURL(r),a.src=o,await a.decode()}finally{URL.revokeObjectURL(o)}}else return r}catch{throw new DOMException("Failed to load or decode Blob.","InvalidStateError")}return await Ur(a)}function ga(r){const{width:a,height:o}=r;if(a===0||o===0)return null;const c=r.getContext("2d");try{return c.getImageData(0,0,a,o)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function wa(r){if(Ir(r))return await ya(r);if(ma(r)){if(_a(r))throw new DOMException("The image data has been detached.","InvalidStateError");return r}return kr(r)||Wr(r)?ga(r):await Ur(r)}async function ba(r){try{return await r.decode(),!0}catch{return!1}}async function Ca(r){var a;try{return await((a=r.decode)==null?void 0:a.call(r)),!0}catch{return!1}}function Ta(r){return r.format===null}function _a(r){return r.data.buffer.byteLength===0}function $a(r){return r.width===0&&r.height===0}function Cr(r,a){return r instanceof DOMException?new DOMException(`${a}: ${r.message}`,r.name):r instanceof Error?new r.constructor(`${a}: ${r.message}`):new Error(`${a}: ${r}`)}const Tr=["Aztec","Codabar","Code128","Code39","Code93","DataBar","DataBarExpanded","DataMatrix","EAN-13","EAN-8","ITF","Linear-Codes","Matrix-Codes","MaxiCode","MicroQRCode","None","PDF417","QRCode","UPC-A","UPC-E"];function Pa(r){return r.join("|")}function Sa(r){const a=_r(r);let o=0,c=Tr.length-1;for(;o<=c;){const d=Math.floor((o+c)/2),p=Tr[d],v=_r(p);if(v===a)return p;v<a?o=d+1:c=d-1}return"None"}function _r(r){return r.toLowerCase().replace(/_-\[\]/g,"")}function Ea(r,a){return r.Binarizer[a]}function Oa(r,a){return r.CharacterSet[a]}const Aa=["Text","Binary","Mixed","GS1","ISO15434","UnknownECI"];function Ma(r){return Aa[r.value]}function xa(r,a){return r.EanAddOnSymbol[a]}function Da(r,a){return r.TextMode[a]}const nt={formats:[],tryHarder:!0,tryRotate:!0,tryInvert:!0,tryDownscale:!0,binarizer:"LocalAverage",isPure:!1,downscaleFactor:3,downscaleThreshold:500,minLineCount:2,maxNumberOfSymbols:255,tryCode39ExtendedMode:!1,validateCode39CheckSum:!1,validateITFCheckSum:!1,returnCodabarStartEnd:!1,returnErrors:!1,eanAddOnSymbol:"Read",textMode:"Plain",characterSet:"Unknown"};function Lr(r,a){return{...a,formats:Pa(a.formats),binarizer:Ea(r,a.binarizer),eanAddOnSymbol:xa(r,a.eanAddOnSymbol),textMode:Da(r,a.textMode),characterSet:Oa(r,a.characterSet)}}function Hr(r){return{...r,format:Sa(r.format),eccLevel:r.eccLevel,contentType:Ma(r.contentType)}}const ja={locateFile:(r,a)=>{const o=r.match(/_(.+?)\.wasm$/);return o?`https://fastly.jsdelivr.net/npm/zxing-wasm@1.0.0-rc.4/dist/${o[1]}/${r}`:a+r}};let $r=new WeakMap;function Ft(r,a){var o;const c=$r.get(r);if(c!=null&&c.modulePromise&&(a===void 0||Object.is(a,c.moduleOverrides)))return c.modulePromise;const d=(o=a??(c==null?void 0:c.moduleOverrides))!=null?o:ja,p=r({...d});return $r.set(r,{moduleOverrides:d,modulePromise:p}),p}async function ka(r,a,o=nt){const c={...nt,...o},d=await Ft(r),{size:p}=a,v=new Uint8Array(await a.arrayBuffer()),C=d._malloc(p);d.HEAPU8.set(v,C);const h=d.readBarcodesFromImage(C,p,Lr(d,c));d._free(C);const w=[];for(let T=0;T<h.size();++T)w.push(Hr(h.get(T)));return w}async function Ra(r,a,o=nt){const c={...nt,...o},d=await Ft(r),{data:p,width:v,height:C,data:{byteLength:h}}=a,w=d._malloc(h);d.HEAPU8.set(p,w);const T=d.readBarcodesFromPixmap(w,v,C,Lr(d,c));d._free(w);const b=[];for(let D=0;D<T.size();++D)b.push(Hr(T.get(D)));return b}var It=(()=>{var r=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(a={}){var o=a,c,d;o.ready=new Promise((e,t)=>{c=e,d=t});var p=Object.assign({},o),v="./this.program",C=typeof window=="object",h=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;var w="";function T(e){return o.locateFile?o.locateFile(e,w):w+e}var b;(C||h)&&(h?w=self.location.href:typeof document<"u"&&document.currentScript&&(w=document.currentScript.src),r&&(w=r),w.indexOf("blob:")!==0?w=w.substr(0,w.replace(/[?#].*/,"").lastIndexOf("/")+1):w="",h&&(b=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)})),o.print||console.log.bind(console);var D=o.printErr||console.error.bind(console);Object.assign(o,p),p=null,o.arguments&&o.arguments,o.thisProgram&&(v=o.thisProgram),o.quit&&o.quit;var j;o.wasmBinary&&(j=o.wasmBinary),typeof WebAssembly!="object"&&me("no native wasm support detected");var A,k=!1;function Z(e,t){e||me(t)}var Q,M,R,z,I,x,we,be;function Pe(){var e=A.buffer;o.HEAP8=Q=new Int8Array(e),o.HEAP16=R=new Int16Array(e),o.HEAPU8=M=new Uint8Array(e),o.HEAPU16=z=new Uint16Array(e),o.HEAP32=I=new Int32Array(e),o.HEAPU32=x=new Uint32Array(e),o.HEAPF32=we=new Float32Array(e),o.HEAPF64=be=new Float64Array(e)}var Se=[],Ee=[],Fe=[];function it(){if(o.preRun)for(typeof o.preRun=="function"&&(o.preRun=[o.preRun]);o.preRun.length;)Oe(o.preRun.shift());ft(Se)}function st(){ft(Ee)}function ct(){if(o.postRun)for(typeof o.postRun=="function"&&(o.postRun=[o.postRun]);o.postRun.length;)ut(o.postRun.shift());ft(Fe)}function Oe(e){Se.unshift(e)}function Ie(e){Ee.unshift(e)}function ut(e){Fe.unshift(e)}var ie=0,X=null;function re(e){ie++,o.monitorRunDependencies&&o.monitorRunDependencies(ie)}function lt(e){if(ie--,o.monitorRunDependencies&&o.monitorRunDependencies(ie),ie==0&&X){var t=X;X=null,t()}}function me(e){o.onAbort&&o.onAbort(e),e="Aborted("+e+")",D(e),k=!0,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw d(t),t}var dt="data:application/octet-stream;base64,",Ue=e=>e.startsWith(dt),le;le="zxing_reader.wasm",Ue(le)||(le=T(le));function Le(e){if(e==le&&j)return new Uint8Array(j);if(b)return b(e);throw"both async and sync fetching of the wasm failed"}function tn(e){return!j&&(C||h)&&typeof fetch=="function"?fetch(e,{credentials:"same-origin"}).then(t=>{if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()}).catch(()=>Le(e)):Promise.resolve().then(()=>Le(e))}function Lt(e,t,n){return tn(e).then(i=>WebAssembly.instantiate(i,t)).then(i=>i).then(n,i=>{D(`failed to asynchronously prepare wasm: ${i}`),me(i)})}function rn(e,t,n,i){return!e&&typeof WebAssembly.instantiateStreaming=="function"&&!Ue(t)&&typeof fetch=="function"?fetch(t,{credentials:"same-origin"}).then(s=>{var u=WebAssembly.instantiateStreaming(s,n);return u.then(i,function(l){return D(`wasm streaming compile failed: ${l}`),D("falling back to ArrayBuffer instantiation"),Lt(t,n,i)})}):Lt(t,n,i)}function nn(){var e={a:Uo};function t(i,s){return U=i.exports,A=U.fa,Pe(),Kt=U.ja,Ie(U.ga),lt(),U}re();function n(i){t(i.instance)}if(o.instantiateWasm)try{return o.instantiateWasm(e,t)}catch(i){D(`Module.instantiateWasm callback failed with error: ${i}`),d(i)}return rn(j,le,e,n).catch(d),{}}var ft=e=>{for(;e.length>0;)e.shift()(o)};o.noExitRuntime;var He=[],Ne=0,on=e=>{var t=new ht(e);return t.get_caught()||(t.set_caught(!0),Ne--),t.set_rethrown(!1),He.push(t),pr(t.excPtr),t.get_exception_ptr()},se=0,an=()=>{L(0,0);var e=He.pop();hr(e.excPtr),se=0};function ht(e){this.excPtr=e,this.ptr=e-24,this.set_type=function(t){x[this.ptr+4>>2]=t},this.get_type=function(){return x[this.ptr+4>>2]},this.set_destructor=function(t){x[this.ptr+8>>2]=t},this.get_destructor=function(){return x[this.ptr+8>>2]},this.set_caught=function(t){t=t?1:0,Q[this.ptr+12>>0]=t},this.get_caught=function(){return Q[this.ptr+12>>0]!=0},this.set_rethrown=function(t){t=t?1:0,Q[this.ptr+13>>0]=t},this.get_rethrown=function(){return Q[this.ptr+13>>0]!=0},this.init=function(t,n){this.set_adjusted_ptr(0),this.set_type(t),this.set_destructor(n)},this.set_adjusted_ptr=function(t){x[this.ptr+16>>2]=t},this.get_adjusted_ptr=function(){return x[this.ptr+16>>2]},this.get_exception_ptr=function(){var t=vr(this.get_type());if(t)return x[this.excPtr>>2];var n=this.get_adjusted_ptr();return n!==0?n:this.excPtr}}var sn=e=>{throw se||(se=e),se},pt=e=>{var t=se;if(!t)return ke(0),0;var n=new ht(t);n.set_adjusted_ptr(t);var i=n.get_type();if(!i)return ke(0),t;for(var s in e){var u=e[s];if(u===0||u===i)break;var l=n.ptr+16;if(mr(u,i,l))return ke(u),t}return ke(i),t},cn=()=>pt([]),un=e=>pt([e]),ln=(e,t)=>pt([e,t]),dn=()=>{var e=He.pop();e||me("no exception to throw");var t=e.excPtr;throw e.get_rethrown()||(He.push(e),e.set_rethrown(!0),e.set_caught(!1),Ne++),se=t,se},fn=(e,t,n)=>{var i=new ht(e);throw i.init(t,n),se=e,Ne++,se},hn=()=>Ne,Ve={},Ht=e=>{for(;e.length;){var t=e.pop(),n=e.pop();n(t)}};function mt(e){return this.fromWireType(I[e>>2])}var Ce={},ve={},Be={},Nt,ze=e=>{throw new Nt(e)},ye=(e,t,n)=>{e.forEach(function(f){Be[f]=t});function i(f){var m=n(f);m.length!==e.length&&ze("Mismatched type converter count");for(var g=0;g<e.length;++g)ne(e[g],m[g])}var s=new Array(t.length),u=[],l=0;t.forEach((f,m)=>{ve.hasOwnProperty(f)?s[m]=ve[f]:(u.push(f),Ce.hasOwnProperty(f)||(Ce[f]=[]),Ce[f].push(()=>{s[m]=ve[f],++l,l===u.length&&i(s)}))}),u.length===0&&i(s)},pn=e=>{var t=Ve[e];delete Ve[e];var n=t.rawConstructor,i=t.rawDestructor,s=t.fields,u=s.map(l=>l.getterReturnType).concat(s.map(l=>l.setterArgumentType));ye([e],u,l=>{var f={};return s.forEach((m,g)=>{var _=m.fieldName,P=l[g],S=m.getter,E=m.getterContext,W=l[g+s.length],Y=m.setter,F=m.setterContext;f[_]={read:J=>P.fromWireType(S(E,J)),write:(J,y)=>{var $=[];Y(F,J,W.toWireType($,y)),Ht($)}}}),[{name:t.name,fromWireType:m=>{var g={};for(var _ in f)g[_]=f[_].read(m);return i(m),g},toWireType:(m,g)=>{for(var _ in f)if(!(_ in g))throw new TypeError(`Missing field: "${_}"`);var P=n();for(_ in f)f[_].write(P,g[_]);return m!==null&&m.push(i,P),P},argPackAdvance:oe,readValueFromPointer:mt,destructorFunction:i}]})},mn=(e,t,n,i,s)=>{},vn=()=>{for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);Vt=e},Vt,q=e=>{for(var t="",n=e;M[n];)t+=Vt[M[n++]];return t},Te,O=e=>{throw new Te(e)};function yn(e,t,n={}){var i=t.name;if(e||O(`type "${i}" must have a positive integer typeid pointer`),ve.hasOwnProperty(e)){if(n.ignoreDuplicateRegistrations)return;O(`Cannot register type '${i}' twice`)}if(ve[e]=t,delete Be[e],Ce.hasOwnProperty(e)){var s=Ce[e];delete Ce[e],s.forEach(u=>u())}}function ne(e,t,n={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");return yn(e,t,n)}var oe=8,gn=(e,t,n,i)=>{t=q(t),ne(e,{name:t,fromWireType:function(s){return!!s},toWireType:function(s,u){return u?n:i},argPackAdvance:oe,readValueFromPointer:function(s){return this.fromWireType(M[s])},destructorFunction:null})},wn=e=>({count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}),vt=e=>{function t(n){return n.$$.ptrType.registeredClass.name}O(t(e)+" instance already deleted")},yt=!1,Bt=e=>{},bn=e=>{e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)},zt=e=>{e.count.value-=1;var t=e.count.value===0;t&&bn(e)},Gt=(e,t,n)=>{if(t===n)return e;if(n.baseClass===void 0)return null;var i=Gt(e,t,n.baseClass);return i===null?null:n.downcast(i)},qt={},Cn=()=>Object.keys(xe).length,Tn=()=>{var e=[];for(var t in xe)xe.hasOwnProperty(t)&&e.push(xe[t]);return e},Ae=[],gt=()=>{for(;Ae.length;){var e=Ae.pop();e.$$.deleteScheduled=!1,e.delete()}},Me,_n=e=>{Me=e,Ae.length&&Me&&Me(gt)},$n=()=>{o.getInheritedInstanceCount=Cn,o.getLiveInheritedInstances=Tn,o.flushPendingDeletes=gt,o.setDelayFunction=_n},xe={},Pn=(e,t)=>{for(t===void 0&&O("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t},Sn=(e,t)=>(t=Pn(e,t),xe[t]),Ge=(e,t)=>{(!t.ptrType||!t.ptr)&&ze("makeClassHandle requires ptr and ptrType");var n=!!t.smartPtrType,i=!!t.smartPtr;return n!==i&&ze("Both smartPtrType and smartPtr must be specified"),t.count={value:1},De(Object.create(e,{$$:{value:t}}))};function En(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var n=Sn(this.registeredClass,t);if(n!==void 0){if(n.$$.count.value===0)return n.$$.ptr=t,n.$$.smartPtr=e,n.clone();var i=n.clone();return this.destructor(e),i}function s(){return this.isSmartPointer?Ge(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):Ge(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var u=this.registeredClass.getActualType(t),l=qt[u];if(!l)return s.call(this);var f;this.isConst?f=l.constPointerType:f=l.pointerType;var m=Gt(t,this.registeredClass,f.registeredClass);return m===null?s.call(this):this.isSmartPointer?Ge(f.registeredClass.instancePrototype,{ptrType:f,ptr:m,smartPtrType:this,smartPtr:e}):Ge(f.registeredClass.instancePrototype,{ptrType:f,ptr:m})}var De=e=>typeof FinalizationRegistry>"u"?(De=t=>t,e):(yt=new FinalizationRegistry(t=>{zt(t.$$)}),De=t=>{var n=t.$$,i=!!n.smartPtr;if(i){var s={$$:n};yt.register(t,s,t)}return t},Bt=t=>yt.unregister(t),De(e)),On=()=>{Object.assign(qe.prototype,{isAliasOf(e){if(!(this instanceof qe)||!(e instanceof qe))return!1;var t=this.$$.ptrType.registeredClass,n=this.$$.ptr;e.$$=e.$$;for(var i=e.$$.ptrType.registeredClass,s=e.$$.ptr;t.baseClass;)n=t.upcast(n),t=t.baseClass;for(;i.baseClass;)s=i.upcast(s),i=i.baseClass;return t===i&&n===s},clone(){if(this.$$.ptr||vt(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=De(Object.create(Object.getPrototypeOf(this),{$$:{value:wn(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e},delete(){this.$$.ptr||vt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&O("Object already scheduled for deletion"),Bt(this),zt(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||vt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&O("Object already scheduled for deletion"),Ae.push(this),Ae.length===1&&Me&&Me(gt),this.$$.deleteScheduled=!0,this}})};function qe(){}var An=48,Mn=57,Yt=e=>{if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return t>=An&&t<=Mn?`_${e}`:e};function wt(e,t){return e=Yt(e),{[e]:function(){return t.apply(this,arguments)}}[e]}var Jt=(e,t,n)=>{if(e[t].overloadTable===void 0){var i=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||O(`Function '${n}' called with an invalid number of arguments (${arguments.length}) - expects one of (${e[t].overloadTable})!`),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[i.argCount]=i}},bt=(e,t,n)=>{o.hasOwnProperty(e)?((n===void 0||o[e].overloadTable!==void 0&&o[e].overloadTable[n]!==void 0)&&O(`Cannot register public name '${e}' twice`),Jt(o,e,e),o.hasOwnProperty(n)&&O(`Cannot register multiple overloads of a function with the same number of arguments (${n})!`),o[e].overloadTable[n]=t):(o[e]=t,n!==void 0&&(o[e].numArguments=n))};function xn(e,t,n,i,s,u,l,f){this.name=e,this.constructor=t,this.instancePrototype=n,this.rawDestructor=i,this.baseClass=s,this.getActualType=u,this.upcast=l,this.downcast=f,this.pureVirtualFunctions=[]}var Ct=(e,t,n)=>{for(;t!==n;)t.upcast||O(`Expected null or instance of ${n.name}, got an instance of ${t.name}`),e=t.upcast(e),t=t.baseClass;return e};function Dn(e,t){if(t===null)return this.isReference&&O(`null is not a valid ${this.name}`),0;t.$$||O(`Cannot pass "${Pt(t)}" as a ${this.name}`),t.$$.ptr||O(`Cannot pass deleted object as a pointer of type ${this.name}`);var n=t.$$.ptrType.registeredClass,i=Ct(t.$$.ptr,n,this.registeredClass);return i}function jn(e,t){var n;if(t===null)return this.isReference&&O(`null is not a valid ${this.name}`),this.isSmartPointer?(n=this.rawConstructor(),e!==null&&e.push(this.rawDestructor,n),n):0;t.$$||O(`Cannot pass "${Pt(t)}" as a ${this.name}`),t.$$.ptr||O(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&t.$$.ptrType.isConst&&O(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);var i=t.$$.ptrType.registeredClass;if(n=Ct(t.$$.ptr,i,this.registeredClass),this.isSmartPointer)switch(t.$$.smartPtr===void 0&&O("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?n=t.$$.smartPtr:O(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:n=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)n=t.$$.smartPtr;else{var s=t.clone();n=this.rawShare(n,de.toHandle(()=>s.delete())),e!==null&&e.push(this.rawDestructor,n)}break;default:O("Unsupporting sharing policy")}return n}function kn(e,t){if(t===null)return this.isReference&&O(`null is not a valid ${this.name}`),0;t.$$||O(`Cannot pass "${Pt(t)}" as a ${this.name}`),t.$$.ptr||O(`Cannot pass deleted object as a pointer of type ${this.name}`),t.$$.ptrType.isConst&&O(`Cannot convert argument of type ${t.$$.ptrType.name} to parameter type ${this.name}`);var n=t.$$.ptrType.registeredClass,i=Ct(t.$$.ptr,n,this.registeredClass);return i}function Qt(e){return this.fromWireType(x[e>>2])}var Rn=()=>{Object.assign(Ye.prototype,{getPointee(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},destructor(e){this.rawDestructor&&this.rawDestructor(e)},argPackAdvance:oe,readValueFromPointer:Qt,deleteObject(e){e!==null&&e.delete()},fromWireType:En})};function Ye(e,t,n,i,s,u,l,f,m,g,_){this.name=e,this.registeredClass=t,this.isReference=n,this.isConst=i,this.isSmartPointer=s,this.pointeeType=u,this.sharingPolicy=l,this.rawGetPointee=f,this.rawConstructor=m,this.rawShare=g,this.rawDestructor=_,!s&&t.baseClass===void 0?i?(this.toWireType=Dn,this.destructorFunction=null):(this.toWireType=kn,this.destructorFunction=null):this.toWireType=jn}var Zt=(e,t,n)=>{o.hasOwnProperty(e)||ze("Replacing nonexistant public symbol"),o[e].overloadTable!==void 0&&n!==void 0?o[e].overloadTable[n]=t:(o[e]=t,o[e].argCount=n)},Wn=(e,t,n)=>{var i=o["dynCall_"+e];return n&&n.length?i.apply(null,[t].concat(n)):i.call(null,t)},Je=[],Kt,H=e=>{var t=Je[e];return t||(e>=Je.length&&(Je.length=e+1),Je[e]=t=Kt.get(e)),t},Fn=(e,t,n)=>{if(e.includes("j"))return Wn(e,t,n);var i=H(t).apply(null,n);return i},In=(e,t)=>{var n=[];return function(){return n.length=0,Object.assign(n,arguments),Fn(e,t,n)}},te=(e,t)=>{e=q(e);function n(){return e.includes("j")?In(e,t):H(t)}var i=n();return typeof i!="function"&&O(`unknown function pointer with signature ${e}: ${t}`),i},Un=(e,t)=>{var n=wt(t,function(i){this.name=t,this.message=i;var s=new Error(i).stack;s!==void 0&&(this.stack=this.toString()+`
`+s.replace(/^Error(:[^\n]*)?\n/,""))});return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},n},Xt,er=e=>{var t=fr(e),n=q(t);return ce(t),n},Qe=(e,t)=>{var n=[],i={};function s(u){if(!i[u]&&!ve[u]){if(Be[u]){Be[u].forEach(s);return}n.push(u),i[u]=!0}}throw t.forEach(s),new Xt(`${e}: `+n.map(er).join([", "]))},Ln=(e,t,n,i,s,u,l,f,m,g,_,P,S)=>{_=q(_),u=te(s,u),f&&(f=te(l,f)),g&&(g=te(m,g)),S=te(P,S);var E=Yt(_);bt(E,function(){Qe(`Cannot construct ${_} due to unbound types`,[i])}),ye([e,t,n],i?[i]:[],function(W){W=W[0];var Y,F;i?(Y=W.registeredClass,F=Y.instancePrototype):F=qe.prototype;var J=wt(E,function(){if(Object.getPrototypeOf(this)!==y)throw new Te("Use 'new' to construct "+_);if($.constructor_body===void 0)throw new Te(_+" has no accessible constructor");var Xe=$.constructor_body[arguments.length];if(Xe===void 0)throw new Te(`Tried to invoke ctor of ${_} with invalid number of parameters (${arguments.length}) - expected (${Object.keys($.constructor_body).toString()}) parameters instead!`);return Xe.apply(this,arguments)}),y=Object.create(F,{constructor:{value:J}});J.prototype=y;var $=new xn(_,J,y,S,Y,u,f,g);$.baseClass&&($.baseClass.__derivedClasses===void 0&&($.baseClass.__derivedClasses=[]),$.baseClass.__derivedClasses.push($));var B=new Ye(_,$,!0,!1,!1),G=new Ye(_+"*",$,!1,!1,!1),ge=new Ye(_+" const*",$,!1,!0,!1);return qt[e]={pointerType:G,constPointerType:ge},Zt(E,J),[B,G,ge]})},Tt=(e,t)=>{for(var n=[],i=0;i<e;i++)n.push(x[t+i*4>>2]);return n};function _t(e,t,n,i,s,u){var l=t.length;l<2&&O("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var f=t[1]!==null&&n!==null,m=!1,g=1;g<t.length;++g)if(t[g]!==null&&t[g].destructorFunction===void 0){m=!0;break}var _=t[0].name!=="void",P=l-2,S=new Array(P),E=[],W=[];return function(){arguments.length!==P&&O(`function ${e} called with ${arguments.length} arguments, expected ${P}`),W.length=0;var Y;E.length=f?2:1,E[0]=s,f&&(Y=t[1].toWireType(W,this),E[1]=Y);for(var F=0;F<P;++F)S[F]=t[F+2].toWireType(W,arguments[F]),E.push(S[F]);var J=i.apply(null,E);function y($){if(m)Ht(W);else for(var B=f?1:2;B<t.length;B++){var G=B===1?Y:S[B-2];t[B].destructorFunction!==null&&t[B].destructorFunction(G)}if(_)return t[0].fromWireType($)}return y(J)}}var Hn=(e,t,n,i,s,u)=>{var l=Tt(t,n);s=te(i,s),ye([],[e],function(f){f=f[0];var m=`constructor ${f.name}`;if(f.registeredClass.constructor_body===void 0&&(f.registeredClass.constructor_body=[]),f.registeredClass.constructor_body[t-1]!==void 0)throw new Te(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${f.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return f.registeredClass.constructor_body[t-1]=()=>{Qe(`Cannot construct ${f.name} due to unbound types`,l)},ye([],l,g=>(g.splice(1,0,null),f.registeredClass.constructor_body[t-1]=_t(m,g,null,s,u),[])),[]})},tr=e=>{e=e.trim();const t=e.indexOf("(");return t!==-1?(Z(e[e.length-1]==")","Parentheses for argument names should match."),e.substr(0,t)):e},Nn=(e,t,n,i,s,u,l,f,m)=>{var g=Tt(n,i);t=q(t),t=tr(t),u=te(s,u),ye([],[e],function(_){_=_[0];var P=`${_.name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),f&&_.registeredClass.pureVirtualFunctions.push(t);function S(){Qe(`Cannot call ${P} due to unbound types`,g)}var E=_.registeredClass.instancePrototype,W=E[t];return W===void 0||W.overloadTable===void 0&&W.className!==_.name&&W.argCount===n-2?(S.argCount=n-2,S.className=_.name,E[t]=S):(Jt(E,t,P),E[t].overloadTable[n-2]=S),ye([],g,function(Y){var F=_t(P,Y,_,u,l);return E[t].overloadTable===void 0?(F.argCount=n-2,E[t]=F):E[t].overloadTable[n-2]=F,[]}),[]})};function Vn(){Object.assign(rr.prototype,{get(e){return this.allocated[e]},has(e){return this.allocated[e]!==void 0},allocate(e){var t=this.freelist.pop()||this.allocated.length;return this.allocated[t]=e,t},free(e){this.allocated[e]=void 0,this.freelist.push(e)}})}function rr(){this.allocated=[void 0],this.freelist=[]}var ee=new rr,nr=e=>{e>=ee.reserved&&--ee.get(e).refcount===0&&ee.free(e)},Bn=()=>{for(var e=0,t=ee.reserved;t<ee.allocated.length;++t)ee.allocated[t]!==void 0&&++e;return e},zn=()=>{ee.allocated.push({value:void 0},{value:null},{value:!0},{value:!1}),ee.reserved=ee.allocated.length,o.count_emval_handles=Bn},de={toValue:e=>(e||O("Cannot use deleted val. handle = "+e),ee.get(e).value),toHandle:e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return ee.allocate({refcount:1,value:e})}}},Gn=(e,t)=>{t=q(t),ne(e,{name:t,fromWireType:n=>{var i=de.toValue(n);return nr(n),i},toWireType:(n,i)=>de.toHandle(i),argPackAdvance:oe,readValueFromPointer:mt,destructorFunction:null})},qn=(e,t,n)=>{switch(t){case 1:return n?function(i){return this.fromWireType(Q[i>>0])}:function(i){return this.fromWireType(M[i>>0])};case 2:return n?function(i){return this.fromWireType(R[i>>1])}:function(i){return this.fromWireType(z[i>>1])};case 4:return n?function(i){return this.fromWireType(I[i>>2])}:function(i){return this.fromWireType(x[i>>2])};default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},Yn=(e,t,n,i)=>{t=q(t);function s(){}s.values={},ne(e,{name:t,constructor:s,fromWireType:function(u){return this.constructor.values[u]},toWireType:(u,l)=>l.value,argPackAdvance:oe,readValueFromPointer:qn(t,n,i),destructorFunction:null}),bt(t,s)},$t=(e,t)=>{var n=ve[e];return n===void 0&&O(t+" has unknown type "+er(e)),n},Jn=(e,t,n)=>{var i=$t(e,"enum");t=q(t);var s=i.constructor,u=Object.create(i.constructor.prototype,{value:{value:n},constructor:{value:wt(`${i.name}_${t}`,function(){})}});s.values[n]=u,s[t]=u},Pt=e=>{if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e},Qn=(e,t)=>{switch(t){case 4:return function(n){return this.fromWireType(we[n>>2])};case 8:return function(n){return this.fromWireType(be[n>>3])};default:throw new TypeError(`invalid float width (${t}): ${e}`)}},Zn=(e,t,n)=>{t=q(t),ne(e,{name:t,fromWireType:i=>i,toWireType:(i,s)=>s,argPackAdvance:oe,readValueFromPointer:Qn(t,n),destructorFunction:null})},Kn=(e,t,n,i,s,u,l)=>{var f=Tt(t,n);e=q(e),e=tr(e),s=te(i,s),bt(e,function(){Qe(`Cannot call ${e} due to unbound types`,f)},t-1),ye([],f,function(m){var g=[m[0],null].concat(m.slice(1));return Zt(e,_t(e,g,null,s,u),t-1),[]})},Xn=(e,t,n)=>{switch(t){case 1:return n?i=>Q[i>>0]:i=>M[i>>0];case 2:return n?i=>R[i>>1]:i=>z[i>>1];case 4:return n?i=>I[i>>2]:i=>x[i>>2];default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},eo=(e,t,n,i,s)=>{t=q(t);var u=_=>_;if(i===0){var l=32-8*n;u=_=>_<<l>>>l}var f=t.includes("unsigned"),m=(_,P)=>{},g;f?g=function(_,P){return m(P,this.name),P>>>0}:g=function(_,P){return m(P,this.name),P},ne(e,{name:t,fromWireType:u,toWireType:g,argPackAdvance:oe,readValueFromPointer:Xn(t,n,i!==0),destructorFunction:null})},to=(e,t,n)=>{var i=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],s=i[t];function u(l){var f=x[l>>2],m=x[l+4>>2];return new s(Q.buffer,m,f)}n=q(n),ne(e,{name:n,fromWireType:u,argPackAdvance:oe,readValueFromPointer:u},{ignoreDuplicateRegistrations:!0})},or=(e,t,n,i)=>{if(!(i>0))return 0;for(var s=n,u=n+i-1,l=0;l<e.length;++l){var f=e.charCodeAt(l);if(f>=55296&&f<=57343){var m=e.charCodeAt(++l);f=65536+((f&1023)<<10)|m&1023}if(f<=127){if(n>=u)break;t[n++]=f}else if(f<=2047){if(n+1>=u)break;t[n++]=192|f>>6,t[n++]=128|f&63}else if(f<=65535){if(n+2>=u)break;t[n++]=224|f>>12,t[n++]=128|f>>6&63,t[n++]=128|f&63}else{if(n+3>=u)break;t[n++]=240|f>>18,t[n++]=128|f>>12&63,t[n++]=128|f>>6&63,t[n++]=128|f&63}}return t[n]=0,n-s},ro=(e,t,n)=>or(e,M,t,n),ar=e=>{for(var t=0,n=0;n<e.length;++n){var i=e.charCodeAt(n);i<=127?t++:i<=2047?t+=2:i>=55296&&i<=57343?(t+=4,++n):t+=3}return t},ir=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,no=(e,t,n)=>{for(var i=t+n,s=t;e[s]&&!(s>=i);)++s;if(s-t>16&&e.buffer&&ir)return ir.decode(e.subarray(t,s));for(var u="";t<s;){var l=e[t++];if(!(l&128)){u+=String.fromCharCode(l);continue}var f=e[t++]&63;if((l&224)==192){u+=String.fromCharCode((l&31)<<6|f);continue}var m=e[t++]&63;if((l&240)==224?l=(l&15)<<12|f<<6|m:l=(l&7)<<18|f<<12|m<<6|e[t++]&63,l<65536)u+=String.fromCharCode(l);else{var g=l-65536;u+=String.fromCharCode(55296|g>>10,56320|g&1023)}}return u},St=(e,t)=>e?no(M,e,t):"",oo=(e,t)=>{t=q(t);var n=t==="std::string";ne(e,{name:t,fromWireType(i){var s=x[i>>2],u=i+4,l;if(n)for(var f=u,m=0;m<=s;++m){var g=u+m;if(m==s||M[g]==0){var _=g-f,P=St(f,_);l===void 0?l=P:(l+=String.fromCharCode(0),l+=P),f=g+1}}else{for(var S=new Array(s),m=0;m<s;++m)S[m]=String.fromCharCode(M[u+m]);l=S.join("")}return ce(i),l},toWireType(i,s){s instanceof ArrayBuffer&&(s=new Uint8Array(s));var u,l=typeof s=="string";l||s instanceof Uint8Array||s instanceof Uint8ClampedArray||s instanceof Int8Array||O("Cannot pass non-string to std::string"),n&&l?u=ar(s):u=s.length;var f=Ot(4+u+1),m=f+4;if(x[f>>2]=u,n&&l)ro(s,m,u+1);else if(l)for(var g=0;g<u;++g){var _=s.charCodeAt(g);_>255&&(ce(m),O("String has UTF-16 code units that do not fit in 8 bits")),M[m+g]=_}else for(var g=0;g<u;++g)M[m+g]=s[g];return i!==null&&i.push(ce,f),f},argPackAdvance:oe,readValueFromPointer:Qt,destructorFunction(i){ce(i)}})},sr=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,ao=(e,t)=>{for(var n=e,i=n>>1,s=i+t/2;!(i>=s)&&z[i];)++i;if(n=i<<1,n-e>32&&sr)return sr.decode(M.subarray(e,n));for(var u="",l=0;!(l>=t/2);++l){var f=R[e+l*2>>1];if(f==0)break;u+=String.fromCharCode(f)}return u},io=(e,t,n)=>{if(n===void 0&&(n=2147483647),n<2)return 0;n-=2;for(var i=t,s=n<e.length*2?n/2:e.length,u=0;u<s;++u){var l=e.charCodeAt(u);R[t>>1]=l,t+=2}return R[t>>1]=0,t-i},so=e=>e.length*2,co=(e,t)=>{for(var n=0,i="";!(n>=t/4);){var s=I[e+n*4>>2];if(s==0)break;if(++n,s>=65536){var u=s-65536;i+=String.fromCharCode(55296|u>>10,56320|u&1023)}else i+=String.fromCharCode(s)}return i},uo=(e,t,n)=>{if(n===void 0&&(n=2147483647),n<4)return 0;for(var i=t,s=i+n-4,u=0;u<e.length;++u){var l=e.charCodeAt(u);if(l>=55296&&l<=57343){var f=e.charCodeAt(++u);l=65536+((l&1023)<<10)|f&1023}if(I[t>>2]=l,t+=4,t+4>s)break}return I[t>>2]=0,t-i},lo=e=>{for(var t=0,n=0;n<e.length;++n){var i=e.charCodeAt(n);i>=55296&&i<=57343&&++n,t+=4}return t},fo=(e,t,n)=>{n=q(n);var i,s,u,l,f;t===2?(i=ao,s=io,l=so,u=()=>z,f=1):t===4&&(i=co,s=uo,l=lo,u=()=>x,f=2),ne(e,{name:n,fromWireType:m=>{for(var g=x[m>>2],_=u(),P,S=m+4,E=0;E<=g;++E){var W=m+4+E*t;if(E==g||_[W>>f]==0){var Y=W-S,F=i(S,Y);P===void 0?P=F:(P+=String.fromCharCode(0),P+=F),S=W+t}}return ce(m),P},toWireType:(m,g)=>{typeof g!="string"&&O(`Cannot pass non-string to C++ string type ${n}`);var _=l(g),P=Ot(4+_+t);return x[P>>2]=_>>f,s(g,P+4,_+t),m!==null&&m.push(ce,P),P},argPackAdvance:oe,readValueFromPointer:mt,destructorFunction(m){ce(m)}})},ho=(e,t,n,i,s,u)=>{Ve[e]={name:q(t),rawConstructor:te(n,i),rawDestructor:te(s,u),fields:[]}},po=(e,t,n,i,s,u,l,f,m,g)=>{Ve[e].fields.push({fieldName:q(t),getterReturnType:n,getter:te(i,s),getterContext:u,setterArgumentType:l,setter:te(f,m),setterContext:g})},mo=(e,t)=>{t=q(t),ne(e,{isVoid:!0,name:t,argPackAdvance:0,fromWireType:()=>{},toWireType:(n,i)=>{}})},vo={},yo=e=>{var t=vo[e];return t===void 0?q(e):t},cr=()=>{if(typeof globalThis=="object")return globalThis;function e(t){t.$$$embind_global$$$=t;var n=typeof $$$embind_global$$$=="object"&&t.$$$embind_global$$$==t;return n||delete t.$$$embind_global$$$,n}if(typeof $$$embind_global$$$=="object"||(typeof global=="object"&&e(global)?$$$embind_global$$$=global:typeof self=="object"&&e(self)&&($$$embind_global$$$=self),typeof $$$embind_global$$$=="object"))return $$$embind_global$$$;throw Error("unable to get global object.")},go=e=>e===0?de.toHandle(cr()):(e=yo(e),de.toHandle(cr()[e])),wo=e=>{e>4&&(ee.get(e).refcount+=1)},bo=e=>{var t=new Array(e+1);return function(n,i,s){t[0]=n;for(var u=0;u<e;++u){var l=$t(x[i+u*4>>2],"parameter "+u);t[u+1]=l.readValueFromPointer(s),s+=l.argPackAdvance}var f=new(n.bind.apply(n,t));return de.toHandle(f)}},ur={},Co=(e,t,n,i)=>{e=de.toValue(e);var s=ur[t];return s||(s=bo(t),ur[t]=s),s(e,n,i)},To=(e,t)=>{e=$t(e,"_emval_take_value");var n=e.readValueFromPointer(t);return de.toHandle(n)},_o=()=>{me("")},$o=(e,t,n)=>M.copyWithin(e,t,t+n),Po=()=>2147483648,So=e=>{var t=A.buffer,n=(e-t.byteLength+65535)/65536;try{return A.grow(n),Pe(),1}catch{}},Eo=e=>{var t=M.length;e>>>=0;var n=Po();if(e>n)return!1;for(var i=(m,g)=>m+(g-m%g)%g,s=1;s<=4;s*=2){var u=t*(1+.2/s);u=Math.min(u,e+100663296);var l=Math.min(n,i(Math.max(e,u),65536)),f=So(l);if(f)return!0}return!1},Et={},Oo=()=>v||"./this.program",je=()=>{if(!je.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:Oo()};for(var n in Et)Et[n]===void 0?delete t[n]:t[n]=Et[n];var i=[];for(var n in t)i.push(`${n}=${t[n]}`);je.strings=i}return je.strings},Ao=(e,t)=>{for(var n=0;n<e.length;++n)Q[t++>>0]=e.charCodeAt(n);Q[t>>0]=0},Mo=(e,t)=>{var n=0;return je().forEach((i,s)=>{var u=t+n;x[e+s*4>>2]=u,Ao(i,u),n+=i.length+1}),0},xo=(e,t)=>{var n=je();x[e>>2]=n.length;var i=0;return n.forEach(s=>i+=s.length+1),x[t>>2]=i,0},Do=e=>e,Ze=e=>e%4===0&&(e%100!==0||e%400===0),jo=(e,t)=>{for(var n=0,i=0;i<=t;n+=e[i++]);return n},lr=[31,29,31,30,31,30,31,31,30,31,30,31],dr=[31,28,31,30,31,30,31,31,30,31,30,31],ko=(e,t)=>{for(var n=new Date(e.getTime());t>0;){var i=Ze(n.getFullYear()),s=n.getMonth(),u=(i?lr:dr)[s];if(t>u-n.getDate())t-=u-n.getDate()+1,n.setDate(1),s<11?n.setMonth(s+1):(n.setMonth(0),n.setFullYear(n.getFullYear()+1));else return n.setDate(n.getDate()+t),n}return n};function Ro(e,t,n){var i=n>0?n:ar(e)+1,s=new Array(i),u=or(e,s,0,s.length);return t&&(s.length=u),s}var Wo=(e,t)=>{Q.set(e,t)},Fo=(e,t,n,i)=>{var s=x[i+40>>2],u={tm_sec:I[i>>2],tm_min:I[i+4>>2],tm_hour:I[i+8>>2],tm_mday:I[i+12>>2],tm_mon:I[i+16>>2],tm_year:I[i+20>>2],tm_wday:I[i+24>>2],tm_yday:I[i+28>>2],tm_isdst:I[i+32>>2],tm_gmtoff:I[i+36>>2],tm_zone:s?St(s):""},l=St(n),f={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var m in f)l=l.replace(new RegExp(m,"g"),f[m]);var g=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],_=["January","February","March","April","May","June","July","August","September","October","November","December"];function P(y,$,B){for(var G=typeof y=="number"?y.toString():y||"";G.length<$;)G=B[0]+G;return G}function S(y,$){return P(y,$,"0")}function E(y,$){function B(ge){return ge<0?-1:ge>0?1:0}var G;return(G=B(y.getFullYear()-$.getFullYear()))===0&&(G=B(y.getMonth()-$.getMonth()))===0&&(G=B(y.getDate()-$.getDate())),G}function W(y){switch(y.getDay()){case 0:return new Date(y.getFullYear()-1,11,29);case 1:return y;case 2:return new Date(y.getFullYear(),0,3);case 3:return new Date(y.getFullYear(),0,2);case 4:return new Date(y.getFullYear(),0,1);case 5:return new Date(y.getFullYear()-1,11,31);case 6:return new Date(y.getFullYear()-1,11,30)}}function Y(y){var $=ko(new Date(y.tm_year+1900,0,1),y.tm_yday),B=new Date($.getFullYear(),0,4),G=new Date($.getFullYear()+1,0,4),ge=W(B),Xe=W(G);return E(ge,$)<=0?E(Xe,$)<=0?$.getFullYear()+1:$.getFullYear():$.getFullYear()-1}var F={"%a":y=>g[y.tm_wday].substring(0,3),"%A":y=>g[y.tm_wday],"%b":y=>_[y.tm_mon].substring(0,3),"%B":y=>_[y.tm_mon],"%C":y=>{var $=y.tm_year+1900;return S($/100|0,2)},"%d":y=>S(y.tm_mday,2),"%e":y=>P(y.tm_mday,2," "),"%g":y=>Y(y).toString().substring(2),"%G":y=>Y(y),"%H":y=>S(y.tm_hour,2),"%I":y=>{var $=y.tm_hour;return $==0?$=12:$>12&&($-=12),S($,2)},"%j":y=>S(y.tm_mday+jo(Ze(y.tm_year+1900)?lr:dr,y.tm_mon-1),3),"%m":y=>S(y.tm_mon+1,2),"%M":y=>S(y.tm_min,2),"%n":()=>`
`,"%p":y=>y.tm_hour>=0&&y.tm_hour<12?"AM":"PM","%S":y=>S(y.tm_sec,2),"%t":()=>"	","%u":y=>y.tm_wday||7,"%U":y=>{var $=y.tm_yday+7-y.tm_wday;return S(Math.floor($/7),2)},"%V":y=>{var $=Math.floor((y.tm_yday+7-(y.tm_wday+6)%7)/7);if((y.tm_wday+371-y.tm_yday-2)%7<=2&&$++,$){if($==53){var B=(y.tm_wday+371-y.tm_yday)%7;B!=4&&(B!=3||!Ze(y.tm_year))&&($=1)}}else{$=52;var G=(y.tm_wday+7-y.tm_yday-1)%7;(G==4||G==5&&Ze(y.tm_year%400-1))&&$++}return S($,2)},"%w":y=>y.tm_wday,"%W":y=>{var $=y.tm_yday+7-(y.tm_wday+6)%7;return S(Math.floor($/7),2)},"%y":y=>(y.tm_year+1900).toString().substring(2),"%Y":y=>y.tm_year+1900,"%z":y=>{var $=y.tm_gmtoff,B=$>=0;return $=Math.abs($)/60,$=$/60*100+$%60,(B?"+":"-")+("0000"+$).slice(-4)},"%Z":y=>y.tm_zone,"%%":()=>"%"};l=l.replace(/%%/g,"\0\0");for(var m in F)l.includes(m)&&(l=l.replace(new RegExp(m,"g"),F[m](u)));l=l.replace(/\0\0/g,"%");var J=Ro(l,!1);return J.length>t?0:(Wo(J,e),J.length-1)},Io=(e,t,n,i,s)=>Fo(e,t,n,i);Nt=o.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},vn(),Te=o.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},On(),$n(),Rn(),Xt=o.UnboundTypeError=Un(Error,"UnboundTypeError"),Vn(),zn();var Uo={s:on,v:an,b:cn,g:un,q:ln,I:dn,f:fn,T:hn,d:sn,ba:pn,P:mn,Y:gn,aa:Ln,$:Hn,w:Nn,X:Gn,x:Yn,h:Jn,K:Zn,L:Kn,t:eo,n:to,J:oo,C:fo,A:ho,ca:po,Z:mo,ea:nr,da:go,M:wo,V:Co,_:To,B:_o,W:$o,U:Eo,R:Mo,S:xo,D:ea,E:Xo,m:ta,a:Lo,e:Bo,o:qo,k:Vo,G:Zo,u:Jo,F:Ko,z:na,O:aa,l:zo,j:Go,c:No,p:Ho,H:Qo,r:ra,i:Yo,y:oa,N:Do,Q:Io},U=nn(),ce=o._free=e=>(ce=o._free=U.ha)(e),Ot=o._malloc=e=>(Ot=o._malloc=U.ia)(e),fr=e=>(fr=U.ka)(e);o.__embind_initialize_bindings=()=>(o.__embind_initialize_bindings=U.la)();var L=(e,t)=>(L=U.ma)(e,t),ke=e=>(ke=U.na)(e),N=()=>(N=U.oa)(),V=e=>(V=U.pa)(e),hr=e=>(hr=U.qa)(e),pr=e=>(pr=U.ra)(e),mr=(e,t,n)=>(mr=U.sa)(e,t,n),vr=e=>(vr=U.ta)(e);o.dynCall_viijii=(e,t,n,i,s,u,l)=>(o.dynCall_viijii=U.ua)(e,t,n,i,s,u,l);var yr=o.dynCall_jiiii=(e,t,n,i,s)=>(yr=o.dynCall_jiiii=U.va)(e,t,n,i,s);o.dynCall_iiiiij=(e,t,n,i,s,u,l)=>(o.dynCall_iiiiij=U.wa)(e,t,n,i,s,u,l),o.dynCall_iiiiijj=(e,t,n,i,s,u,l,f,m)=>(o.dynCall_iiiiijj=U.xa)(e,t,n,i,s,u,l,f,m),o.dynCall_iiiiiijj=(e,t,n,i,s,u,l,f,m,g)=>(o.dynCall_iiiiiijj=U.ya)(e,t,n,i,s,u,l,f,m,g);function Lo(e,t){var n=N();try{return H(e)(t)}catch(i){if(V(n),i!==i+0)throw i;L(1,0)}}function Ho(e,t,n,i){var s=N();try{H(e)(t,n,i)}catch(u){if(V(s),u!==u+0)throw u;L(1,0)}}function No(e,t,n){var i=N();try{H(e)(t,n)}catch(s){if(V(i),s!==s+0)throw s;L(1,0)}}function Vo(e,t,n,i,s){var u=N();try{return H(e)(t,n,i,s)}catch(l){if(V(u),l!==l+0)throw l;L(1,0)}}function Bo(e,t,n){var i=N();try{return H(e)(t,n)}catch(s){if(V(i),s!==s+0)throw s;L(1,0)}}function zo(e){var t=N();try{H(e)()}catch(n){if(V(t),n!==n+0)throw n;L(1,0)}}function Go(e,t){var n=N();try{H(e)(t)}catch(i){if(V(n),i!==i+0)throw i;L(1,0)}}function qo(e,t,n,i){var s=N();try{return H(e)(t,n,i)}catch(u){if(V(s),u!==u+0)throw u;L(1,0)}}function Yo(e,t,n,i,s,u,l,f,m,g,_){var P=N();try{H(e)(t,n,i,s,u,l,f,m,g,_)}catch(S){if(V(P),S!==S+0)throw S;L(1,0)}}function Jo(e,t,n,i,s,u,l){var f=N();try{return H(e)(t,n,i,s,u,l)}catch(m){if(V(f),m!==m+0)throw m;L(1,0)}}function Qo(e,t,n,i,s){var u=N();try{H(e)(t,n,i,s)}catch(l){if(V(u),l!==l+0)throw l;L(1,0)}}function Zo(e,t,n,i,s,u){var l=N();try{return H(e)(t,n,i,s,u)}catch(f){if(V(l),f!==f+0)throw f;L(1,0)}}function Ko(e,t,n,i,s,u,l,f){var m=N();try{return H(e)(t,n,i,s,u,l,f)}catch(g){if(V(m),g!==g+0)throw g;L(1,0)}}function Xo(e,t,n,i){var s=N();try{return H(e)(t,n,i)}catch(u){if(V(s),u!==u+0)throw u;L(1,0)}}function ea(e,t,n,i){var s=N();try{return H(e)(t,n,i)}catch(u){if(V(s),u!==u+0)throw u;L(1,0)}}function ta(e){var t=N();try{return H(e)()}catch(n){if(V(t),n!==n+0)throw n;L(1,0)}}function ra(e,t,n,i,s,u,l,f){var m=N();try{H(e)(t,n,i,s,u,l,f)}catch(g){if(V(m),g!==g+0)throw g;L(1,0)}}function na(e,t,n,i,s,u,l,f,m,g,_,P){var S=N();try{return H(e)(t,n,i,s,u,l,f,m,g,_,P)}catch(E){if(V(S),E!==E+0)throw E;L(1,0)}}function oa(e,t,n,i,s,u,l,f,m,g,_,P,S,E,W,Y){var F=N();try{H(e)(t,n,i,s,u,l,f,m,g,_,P,S,E,W,Y)}catch(J){if(V(F),J!==J+0)throw J;L(1,0)}}function aa(e,t,n,i,s){var u=N();try{return yr(e,t,n,i,s)}catch(l){if(V(u),l!==l+0)throw l;L(1,0)}}var Ke;X=function e(){Ke||gr(),Ke||(X=e)};function gr(){if(ie>0||(it(),ie>0))return;function e(){Ke||(Ke=!0,o.calledRun=!0,!k&&(st(),c(o),o.onRuntimeInitialized&&o.onRuntimeInitialized(),ct()))}o.setStatus?(o.setStatus("Running..."),setTimeout(function(){setTimeout(function(){o.setStatus("")},1),e()},1)):e()}if(o.preInit)for(typeof o.preInit=="function"&&(o.preInit=[o.preInit]);o.preInit.length>0;)o.preInit.pop()();return gr(),a.ready}})();function Wa(r){return Ft(It,r)}async function Fa(r,a){return ka(It,r,a)}async function Ia(r,a){return Ra(It,r,a)}const Dt=new Map([["aztec","Aztec"],["code_128","Code128"],["code_39","Code39"],["code_93","Code93"],["codabar","Codabar"],["data_matrix","DataMatrix"],["ean_13","EAN-13"],["ean_8","EAN-8"],["itf","ITF"],["pdf417","PDF417"],["qr_code","QRCode"],["upc_a","UPC-A"],["upc_e","UPC-E"]]);function Ua(r){for(const[a,o]of Dt)if(r===o)return a;return"unknown"}var We;class at extends EventTarget{constructor(a={}){var o;super(),fa(this,We,void 0);try{const c=(o=a==null?void 0:a.formats)==null?void 0:o.filter(d=>d!=="unknown");if((c==null?void 0:c.length)===0)throw new TypeError("Hint option provided, but is empty.");c==null||c.forEach(d=>{if(!br.includes(d))throw new TypeError(`Failed to read the 'formats' property from 'BarcodeDetectorOptions': The provided value '${d}' is not a valid enum value of type BarcodeFormat.`)}),ha(this,We,c??[]),Wa().then(d=>{this.dispatchEvent(new CustomEvent("load",{detail:d}))}).catch(d=>{this.dispatchEvent(new CustomEvent("error",{detail:d}))})}catch(c){throw Cr(c,"Failed to construct 'BarcodeDetector'")}}static async getSupportedFormats(){return br.filter(a=>a!=="unknown")}async detect(a){try{const o=await wa(a);if(o===null)return[];let c;try{Ir(o)?c=await Fa(o,{tryHarder:!0,formats:wr(this,We).map(d=>Dt.get(d))}):c=await Ia(o,{tryHarder:!0,formats:wr(this,We).map(d=>Dt.get(d))})}catch(d){throw console.error(d),new DOMException("Barcode detection service unavailable.","NotSupportedError")}return c.map(d=>{const{topLeft:{x:p,y:v},topRight:{x:C,y:h},bottomLeft:{x:w,y:T},bottomRight:{x:b,y:D}}=d.position,j=Math.min(p,C,w,b),A=Math.min(v,h,T,D),k=Math.max(p,C,w,b),Z=Math.max(v,h,T,D);return{boundingBox:new DOMRectReadOnly(j,A,k-j,Z-A),rawValue:d.text,format:Ua(d.format),cornerPoints:[{x:p,y:v},{x:C,y:h},{x:b,y:D},{x:w,y:T}]}})}catch(o){throw Cr(o,"Failed to execute 'detect' on 'BarcodeDetector'")}}}We=new WeakMap;const Ut=(r,a,o="error")=>{let c,d;const p=new Promise((v,C)=>{c=v,d=C,r.addEventListener(a,c),r.addEventListener(o,d)});return p.finally(()=>{r.removeEventListener(a,c),r.removeEventListener(o,d)}),p},Pr=r=>new Promise(a=>setTimeout(a,r));class La extends Error{constructor(){super("can't process cross-origin image"),this.name="DropImageFetchError"}}class Nr extends Error{constructor(){super("this browser has no Stream API support"),this.name="StreamApiNotSupportedError"}}class Ha extends Error{constructor(){super("camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP."),this.name="InsecureContextError"}}class Na extends Error{constructor(){super("Loading camera stream timed out after 3 seconds. If you are on iOS in PWA mode, this is a known issue (see https://github.com/gruhn/vue-qrcode-reader/issues/298)"),this.name="StreamLoadTimeoutError"}}let jt;const Va=r=>{jt=new at({formats:r})},Ba=async(r,{detectHandler:a,locateHandler:o,minDelay:c,formats:d})=>{jt=new at({formats:d});const p=v=>async C=>{if(r.readyState>1){const{lastScanned:h,contentBefore:w,lastScanHadContent:T}=v;if(C-h<c)window.requestAnimationFrame(p(v));else{const b=await jt.detect(r),D=b.some(k=>!w.includes(k.rawValue));D&&a(b);const j=b.length>0;j&&o(b),!j&&T&&o(b);const A={lastScanned:C,lastScanHadContent:j,contentBefore:D?b.map(k=>k.rawValue):w};window.requestAnimationFrame(p(A))}}};p({lastScanned:performance.now(),contentBefore:[],lastScanHadContent:!1})(performance.now())},za=async r=>{if(r.startsWith("http")&&r.includes(location.host)===!1)throw new La;const a=document.createElement("img");return a.src=r,await Ut(a,"load"),a},Vr=async(r,a=["qr_code"])=>await new at({formats:a}).detect(r),Ga=async(r,a=["qr_code"])=>{const o=new at({formats:a}),c=await za(r);return await o.detect(c)};var Br={},K={};Object.defineProperty(K,"__esModule",{value:!0});K.compactObject=qr;K.deprecated=ti;var qa=K.detectBrowser=ri;K.disableLog=Ka;K.disableWarnings=Xa;K.extractVersion=rt;K.filterStats=ni;K.log=ei;K.walkStats=ot;K.wrapPeerConnectionEvent=Za;function Ya(r,a,o){return a=Ja(a),a in r?Object.defineProperty(r,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[a]=o,r}function Ja(r){var a=Qa(r,"string");return he(a)==="symbol"?a:String(a)}function Qa(r,a){if(he(r)!=="object"||r===null)return r;var o=r[Symbol.toPrimitive];if(o!==void 0){var c=o.call(r,a||"default");if(he(c)!=="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(r)}function he(r){"@babel/helpers - typeof";return he=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},he(r)}var zr=!0,Gr=!0;function rt(r,a,o){var c=r.match(a);return c&&c.length>=o&&parseInt(c[o],10)}function Za(r,a,o){if(r.RTCPeerConnection){var c=r.RTCPeerConnection.prototype,d=c.addEventListener;c.addEventListener=function(v,C){if(v!==a)return d.apply(this,arguments);var h=function(w){var T=o(w);T&&(C.handleEvent?C.handleEvent(T):C(T))};return this._eventMap=this._eventMap||{},this._eventMap[a]||(this._eventMap[a]=new Map),this._eventMap[a].set(C,h),d.apply(this,[v,h])};var p=c.removeEventListener;c.removeEventListener=function(v,C){if(v!==a||!this._eventMap||!this._eventMap[a])return p.apply(this,arguments);if(!this._eventMap[a].has(C))return p.apply(this,arguments);var h=this._eventMap[a].get(C);return this._eventMap[a].delete(C),this._eventMap[a].size===0&&delete this._eventMap[a],Object.keys(this._eventMap).length===0&&delete this._eventMap,p.apply(this,[v,h])},Object.defineProperty(c,"on"+a,{get:function(){return this["_on"+a]},set:function(v){this["_on"+a]&&(this.removeEventListener(a,this["_on"+a]),delete this["_on"+a]),v&&this.addEventListener(a,this["_on"+a]=v)},enumerable:!0,configurable:!0})}}function Ka(r){return typeof r!="boolean"?new Error("Argument type: "+he(r)+". Please use a boolean."):(zr=r,r?"adapter.js logging disabled":"adapter.js logging enabled")}function Xa(r){return typeof r!="boolean"?new Error("Argument type: "+he(r)+". Please use a boolean."):(Gr=!r,"adapter.js deprecation warnings "+(r?"disabled":"enabled"))}function ei(){if((typeof window>"u"?"undefined":he(window))==="object"){if(zr)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function ti(r,a){Gr&&console.warn(r+" is deprecated, please use "+a+" instead.")}function ri(r){var a={browser:null,version:null};if(typeof r>"u"||!r.navigator||!r.navigator.userAgent)return a.browser="Not a browser.",a;var o=r.navigator;if(o.mozGetUserMedia)a.browser="firefox",a.version=rt(o.userAgent,/Firefox\/(\d+)\./,1);else if(o.webkitGetUserMedia||r.isSecureContext===!1&&r.webkitRTCPeerConnection)a.browser="chrome",a.version=rt(o.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(r.RTCPeerConnection&&o.userAgent.match(/AppleWebKit\/(\d+)\./))a.browser="safari",a.version=rt(o.userAgent,/AppleWebKit\/(\d+)\./,1),a.supportsUnifiedPlan=r.RTCRtpTransceiver&&"currentDirection"in r.RTCRtpTransceiver.prototype;else return a.browser="Not a supported browser.",a;return a}function Sr(r){return Object.prototype.toString.call(r)==="[object Object]"}function qr(r){return Sr(r)?Object.keys(r).reduce(function(a,o){var c=Sr(r[o]),d=c?qr(r[o]):r[o],p=c&&!Object.keys(d).length;return d===void 0||p?a:Object.assign(a,Ya({},o,d))},{}):r}function ot(r,a,o){!a||o.has(a.id)||(o.set(a.id,a),Object.keys(a).forEach(function(c){c.endsWith("Id")?ot(r,r.get(a[c]),o):c.endsWith("Ids")&&a[c].forEach(function(d){ot(r,r.get(d),o)})}))}function ni(r,a,o){var c=o?"outbound-rtp":"inbound-rtp",d=new Map;if(a===null)return d;var p=[];return r.forEach(function(v){v.type==="track"&&v.trackIdentifier===a.id&&p.push(v)}),p.forEach(function(v){r.forEach(function(C){C.type===c&&C.trackId===v.id&&ot(r,C,d)})}),d}Object.defineProperty(Br,"__esModule",{value:!0});var oi=Br.shimGetUserMedia=si,ai=ii(K);function Yr(r){if(typeof WeakMap!="function")return null;var a=new WeakMap,o=new WeakMap;return(Yr=function(c){return c?o:a})(r)}function ii(r,a){if(!a&&r&&r.__esModule)return r;if(r===null||fe(r)!=="object"&&typeof r!="function")return{default:r};var o=Yr(a);if(o&&o.has(r))return o.get(r);var c={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in r)if(p!=="default"&&Object.prototype.hasOwnProperty.call(r,p)){var v=d?Object.getOwnPropertyDescriptor(r,p):null;v&&(v.get||v.set)?Object.defineProperty(c,p,v):c[p]=r[p]}return c.default=r,o&&o.set(r,c),c}function fe(r){"@babel/helpers - typeof";return fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},fe(r)}var Er=ai.log;function si(r,a){var o=r&&r.navigator;if(o.mediaDevices){var c=function(h){if(fe(h)!=="object"||h.mandatory||h.optional)return h;var w={};return Object.keys(h).forEach(function(T){if(!(T==="require"||T==="advanced"||T==="mediaSource")){var b=fe(h[T])==="object"?h[T]:{ideal:h[T]};b.exact!==void 0&&typeof b.exact=="number"&&(b.min=b.max=b.exact);var D=function(A,k){return A?A+k.charAt(0).toUpperCase()+k.slice(1):k==="deviceId"?"sourceId":k};if(b.ideal!==void 0){w.optional=w.optional||[];var j={};typeof b.ideal=="number"?(j[D("min",T)]=b.ideal,w.optional.push(j),j={},j[D("max",T)]=b.ideal,w.optional.push(j)):(j[D("",T)]=b.ideal,w.optional.push(j))}b.exact!==void 0&&typeof b.exact!="number"?(w.mandatory=w.mandatory||{},w.mandatory[D("",T)]=b.exact):["min","max"].forEach(function(A){b[A]!==void 0&&(w.mandatory=w.mandatory||{},w.mandatory[D(A,T)]=b[A])})}}),h.advanced&&(w.optional=(w.optional||[]).concat(h.advanced)),w},d=function(h,w){if(a.version>=61)return w(h);if(h=JSON.parse(JSON.stringify(h)),h&&fe(h.audio)==="object"){var T=function(A,k,Z){k in A&&!(Z in A)&&(A[Z]=A[k],delete A[k])};h=JSON.parse(JSON.stringify(h)),T(h.audio,"autoGainControl","googAutoGainControl"),T(h.audio,"noiseSuppression","googNoiseSuppression"),h.audio=c(h.audio)}if(h&&fe(h.video)==="object"){var b=h.video.facingMode;b=b&&(fe(b)==="object"?b:{ideal:b});var D=a.version<66;if(b&&(b.exact==="user"||b.exact==="environment"||b.ideal==="user"||b.ideal==="environment")&&!(o.mediaDevices.getSupportedConstraints&&o.mediaDevices.getSupportedConstraints().facingMode&&!D)){delete h.video.facingMode;var j;if(b.exact==="environment"||b.ideal==="environment"?j=["back","rear"]:(b.exact==="user"||b.ideal==="user")&&(j=["front"]),j)return o.mediaDevices.enumerateDevices().then(function(A){A=A.filter(function(Z){return Z.kind==="videoinput"});var k=A.find(function(Z){return j.some(function(Q){return Z.label.toLowerCase().includes(Q)})});return!k&&A.length&&j.includes("back")&&(k=A[A.length-1]),k&&(h.video.deviceId=b.exact?{exact:k.deviceId}:{ideal:k.deviceId}),h.video=c(h.video),Er("chrome: "+JSON.stringify(h)),w(h)})}h.video=c(h.video)}return Er("chrome: "+JSON.stringify(h)),w(h)},p=function(h){return a.version>=64?h:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[h.name]||h.name,message:h.message,constraint:h.constraint||h.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},v=function(h,w,T){d(h,function(b){o.webkitGetUserMedia(b,w,function(D){T&&T(p(D))})})};if(o.getUserMedia=v.bind(o),o.mediaDevices.getUserMedia){var C=o.mediaDevices.getUserMedia.bind(o.mediaDevices);o.mediaDevices.getUserMedia=function(h){return d(h,function(w){return C(w).then(function(T){if(w.audio&&!T.getAudioTracks().length||w.video&&!T.getVideoTracks().length)throw T.getTracks().forEach(function(b){b.stop()}),new DOMException("","NotFoundError");return T},function(T){return Promise.reject(p(T))})})}}}}var Jr={};Object.defineProperty(Jr,"__esModule",{value:!0});var ci=Jr.shimGetUserMedia=di,ui=li(K);function Qr(r){if(typeof WeakMap!="function")return null;var a=new WeakMap,o=new WeakMap;return(Qr=function(c){return c?o:a})(r)}function li(r,a){if(!a&&r&&r.__esModule)return r;if(r===null||_e(r)!=="object"&&typeof r!="function")return{default:r};var o=Qr(a);if(o&&o.has(r))return o.get(r);var c={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in r)if(p!=="default"&&Object.prototype.hasOwnProperty.call(r,p)){var v=d?Object.getOwnPropertyDescriptor(r,p):null;v&&(v.get||v.set)?Object.defineProperty(c,p,v):c[p]=r[p]}return c.default=r,o&&o.set(r,c),c}function _e(r){"@babel/helpers - typeof";return _e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_e(r)}function di(r,a){var o=r&&r.navigator,c=r&&r.MediaStreamTrack;if(o.getUserMedia=function(h,w,T){ui.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),o.mediaDevices.getUserMedia(h).then(w,T)},!(a.version>55&&"autoGainControl"in o.mediaDevices.getSupportedConstraints())){var d=function(h,w,T){w in h&&!(T in h)&&(h[T]=h[w],delete h[w])},p=o.mediaDevices.getUserMedia.bind(o.mediaDevices);if(o.mediaDevices.getUserMedia=function(h){return _e(h)==="object"&&_e(h.audio)==="object"&&(h=JSON.parse(JSON.stringify(h)),d(h.audio,"autoGainControl","mozAutoGainControl"),d(h.audio,"noiseSuppression","mozNoiseSuppression")),p(h)},c&&c.prototype.getSettings){var v=c.prototype.getSettings;c.prototype.getSettings=function(){var h=v.apply(this,arguments);return d(h,"mozAutoGainControl","autoGainControl"),d(h,"mozNoiseSuppression","noiseSuppression"),h}}if(c&&c.prototype.applyConstraints){var C=c.prototype.applyConstraints;c.prototype.applyConstraints=function(h){return this.kind==="audio"&&_e(h)==="object"&&(h=JSON.parse(JSON.stringify(h)),d(h,"autoGainControl","mozAutoGainControl"),d(h,"noiseSuppression","mozNoiseSuppression")),C.apply(this,[h])}}}}var ae={};Object.defineProperty(ae,"__esModule",{value:!0});ae.shimAudioContext=Ci;ae.shimCallbacksAPI=vi;ae.shimConstraints=Xr;ae.shimCreateOfferLegacy=bi;var fi=ae.shimGetUserMedia=yi;ae.shimLocalStreamsAPI=pi;ae.shimRTCIceServerUrls=gi;ae.shimRemoteStreamsAPI=mi;ae.shimTrackEventTransceiver=wi;var Zr=hi(K);function Kr(r){if(typeof WeakMap!="function")return null;var a=new WeakMap,o=new WeakMap;return(Kr=function(c){return c?o:a})(r)}function hi(r,a){if(!a&&r&&r.__esModule)return r;if(r===null||pe(r)!=="object"&&typeof r!="function")return{default:r};var o=Kr(a);if(o&&o.has(r))return o.get(r);var c={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in r)if(p!=="default"&&Object.prototype.hasOwnProperty.call(r,p)){var v=d?Object.getOwnPropertyDescriptor(r,p):null;v&&(v.get||v.set)?Object.defineProperty(c,p,v):c[p]=r[p]}return c.default=r,o&&o.set(r,c),c}function pe(r){"@babel/helpers - typeof";return pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},pe(r)}function pi(r){if(!(pe(r)!=="object"||!r.RTCPeerConnection)){if("getLocalStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in r.RTCPeerConnection.prototype)){var a=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addStream=function(o){var c=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(o)||this._localStreams.push(o),o.getAudioTracks().forEach(function(d){return a.call(c,d,o)}),o.getVideoTracks().forEach(function(d){return a.call(c,d,o)})},r.RTCPeerConnection.prototype.addTrack=function(o){for(var c=this,d=arguments.length,p=new Array(d>1?d-1:0),v=1;v<d;v++)p[v-1]=arguments[v];return p&&p.forEach(function(C){c._localStreams?c._localStreams.includes(C)||c._localStreams.push(C):c._localStreams=[C]}),a.apply(this,arguments)}}"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(o){var c=this;this._localStreams||(this._localStreams=[]);var d=this._localStreams.indexOf(o);if(d!==-1){this._localStreams.splice(d,1);var p=o.getTracks();this.getSenders().forEach(function(v){p.includes(v.track)&&c.removeTrack(v)})}})}}function mi(r){if(!(pe(r)!=="object"||!r.RTCPeerConnection)&&("getRemoteStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in r.RTCPeerConnection.prototype))){Object.defineProperty(r.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(o){var c=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=o),this.addEventListener("track",this._onaddstreampoly=function(d){d.streams.forEach(function(p){if(c._remoteStreams||(c._remoteStreams=[]),!c._remoteStreams.includes(p)){c._remoteStreams.push(p);var v=new Event("addstream");v.stream=p,c.dispatchEvent(v)}})})}});var a=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){var o=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(c){c.streams.forEach(function(d){if(o._remoteStreams||(o._remoteStreams=[]),!(o._remoteStreams.indexOf(d)>=0)){o._remoteStreams.push(d);var p=new Event("addstream");p.stream=d,o.dispatchEvent(p)}})}),a.apply(o,arguments)}}}function vi(r){if(!(pe(r)!=="object"||!r.RTCPeerConnection)){var a=r.RTCPeerConnection.prototype,o=a.createOffer,c=a.createAnswer,d=a.setLocalDescription,p=a.setRemoteDescription,v=a.addIceCandidate;a.createOffer=function(h,w){var T=arguments.length>=2?arguments[2]:arguments[0],b=o.apply(this,[T]);return w?(b.then(h,w),Promise.resolve()):b},a.createAnswer=function(h,w){var T=arguments.length>=2?arguments[2]:arguments[0],b=c.apply(this,[T]);return w?(b.then(h,w),Promise.resolve()):b};var C=function(h,w,T){var b=d.apply(this,[h]);return T?(b.then(w,T),Promise.resolve()):b};a.setLocalDescription=C,C=function(h,w,T){var b=p.apply(this,[h]);return T?(b.then(w,T),Promise.resolve()):b},a.setRemoteDescription=C,C=function(h,w,T){var b=v.apply(this,[h]);return T?(b.then(w,T),Promise.resolve()):b},a.addIceCandidate=C}}function yi(r){var a=r&&r.navigator;if(a.mediaDevices&&a.mediaDevices.getUserMedia){var o=a.mediaDevices,c=o.getUserMedia.bind(o);a.mediaDevices.getUserMedia=function(d){return c(Xr(d))}}!a.getUserMedia&&a.mediaDevices&&a.mediaDevices.getUserMedia&&(a.getUserMedia=(function(d,p,v){a.mediaDevices.getUserMedia(d).then(p,v)}).bind(a))}function Xr(r){return r&&r.video!==void 0?Object.assign({},r,{video:Zr.compactObject(r.video)}):r}function gi(r){if(r.RTCPeerConnection){var a=r.RTCPeerConnection;r.RTCPeerConnection=function(o,c){if(o&&o.iceServers){for(var d=[],p=0;p<o.iceServers.length;p++){var v=o.iceServers[p];v.urls===void 0&&v.url?(Zr.deprecated("RTCIceServer.url","RTCIceServer.urls"),v=JSON.parse(JSON.stringify(v)),v.urls=v.url,delete v.url,d.push(v)):d.push(o.iceServers[p])}o.iceServers=d}return new a(o,c)},r.RTCPeerConnection.prototype=a.prototype,"generateCertificate"in a&&Object.defineProperty(r.RTCPeerConnection,"generateCertificate",{get:function(){return a.generateCertificate}})}}function wi(r){pe(r)==="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function bi(r){var a=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(o){if(o){typeof o.offerToReceiveAudio<"u"&&(o.offerToReceiveAudio=!!o.offerToReceiveAudio);var c=this.getTransceivers().find(function(p){return p.receiver.track.kind==="audio"});o.offerToReceiveAudio===!1&&c?c.direction==="sendrecv"?c.setDirection?c.setDirection("sendonly"):c.direction="sendonly":c.direction==="recvonly"&&(c.setDirection?c.setDirection("inactive"):c.direction="inactive"):o.offerToReceiveAudio===!0&&!c&&this.addTransceiver("audio",{direction:"recvonly"}),typeof o.offerToReceiveVideo<"u"&&(o.offerToReceiveVideo=!!o.offerToReceiveVideo);var d=this.getTransceivers().find(function(p){return p.receiver.track.kind==="video"});o.offerToReceiveVideo===!1&&d?d.direction==="sendrecv"?d.setDirection?d.setDirection("sendonly"):d.direction="sendonly":d.direction==="recvonly"&&(d.setDirection?d.setDirection("inactive"):d.direction="inactive"):o.offerToReceiveVideo===!0&&!d&&this.addTransceiver("video",{direction:"recvonly"})}return a.apply(this,arguments)}}function Ci(r){pe(r)!=="object"||r.AudioContext||(r.AudioContext=r.webkitAudioContext)}const Ti=r=>{let a=!1,o;return(...c)=>(a||(o=r(c),a=!0),o)};function ue(r,a){if(r===!1)throw new Error(a??"assertion failure")}const _i=Ti(()=>{const r=qa(window);switch(r.browser){case"chrome":oi(window,r);break;case"firefox":ci(window,r);break;case"safari":fi(window,r);break;default:throw new Nr}});let $e=Promise.resolve({type:"stop",data:{}});async function Or(r,a,o){var c,d,p;if(window.isSecureContext!==!0)throw new Ha;if(((c=navigator==null?void 0:navigator.mediaDevices)==null?void 0:c.getUserMedia)===void 0)throw new Nr;_i();const v=await navigator.mediaDevices.getUserMedia({audio:!1,video:a});r.srcObject!==void 0?r.srcObject=v:r.mozSrcObject!==void 0?r.mozSrcObject=v:window.URL.createObjectURL?r.src=window.URL.createObjectURL(v):window.webkitURL?r.src=window.webkitURL.createObjectURL(v):r.src=v.id,r.play(),await Promise.race([Ut(r,"loadeddata"),Pr(3e3).then(()=>{throw new Na})]),await Pr(500);const[C]=v.getVideoTracks(),h=(p=(d=C==null?void 0:C.getCapabilities)==null?void 0:d.call(C))!=null?p:{};let w=!1;return o&&h.torch&&(await C.applyConstraints({advanced:[{torch:!0}]}),w=!0),{type:"start",data:{videoEl:r,stream:v,capabilities:h,constraints:a,isTorchOn:w}}}async function $i(r,{constraints:a,torch:o,restart:c=!1}){$e=$e.then(p=>{if(p.type==="start"){const{data:{videoEl:v,stream:C,constraints:h,isTorchOn:w}}=p;return!c&&r===v&&a===h&&o===w?p:en(v,C,w).then(()=>Or(r,a,o))}return Or(r,a,o)});const d=await $e;if(d.type==="stop")throw new Error("Something went wrong with the camera task queue (start task).");return d.data.capabilities}async function en(r,a,o){r.src="",r.srcObject=null,r.load(),await Ut(r,"error");for(const c of a.getTracks())o!=null||await c.applyConstraints({advanced:[{torch:!1}]}),a.removeTrack(c),c.stop();return{type:"stop",data:{}}}async function xt(){if($e=$e.then(r=>{if(r.type==="stop")return r;const{data:{videoEl:a,stream:o,isTorchOn:c}}=r;return en(a,o,c)}),(await $e).type==="start")throw new Error("Something went wrong with the camera task queue (stop task).")}const Ei=kt({__name:"QrcodeStream",props:{constraints:{type:Object,default(){return{facingMode:"environment"}}},formats:{type:Array,default:()=>["qr_code"]},paused:{type:Boolean,default:!1},torch:{type:Boolean,default:!1},track:{type:Function}},emits:["detect","camera-on","camera-off","error"],setup(r,{emit:a}){const o=r,c=a,d=Re(),p=Re(),v=Re(),C=Re(!1),h=Re(!1);ia(()=>{h.value=!0}),sa(()=>{xt()});const w=At(()=>({torch:o.torch,constraints:o.constraints,shouldStream:h.value&&!o.paused}));Mt(w,async M=>{const R=v.value;ue(R!==void 0,"cameraSettings watcher should never be triggered when component is not mounted. Thus video element should always be defined.");const z=d.value;ue(z!==void 0,"cameraSettings watcher should never be triggered when component is not mounted. Thus canvas should always be defined.");const I=z.getContext("2d");if(ue(I!==null,"if cavnas is defined, canvas 2d context should also be non-null"),M.shouldStream)try{const x=await $i(R,M);h.value?(C.value=!0,c("camera-on",x)):await xt()}catch(x){c("error",x)}else z.width=R.videoWidth,z.height=R.videoHeight,I.drawImage(R,0,0,R.videoWidth,R.videoHeight),xt(),C.value=!1,c("camera-off")},{deep:!0});const{formats:T}=ca(o);Mt(T,M=>{h.value&&Va(M)});const b=At(()=>w.value.shouldStream&&C.value);Mt(b,M=>{if(M){ue(d.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus pause frame canvas is defined"),D(d.value),ue(p.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus tracking canvas is defined"),D(p.value);const R=()=>o.track===void 0?500:40;ue(v.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus video element is defined"),Ba(v.value,{detectHandler:z=>c("detect",z),formats:o.formats,locateHandler:j,minDelay:R()})}});const D=M=>{const R=M.getContext("2d");ue(R!==null,"canvas 2d context should always be non-null"),R.clearRect(0,0,M.width,M.height)},j=M=>{const R=p.value;ue(R!==void 0,"onLocate handler should only be called when component is mounted. Thus tracking canvas is always defined.");const z=v.value;if(ue(z!==void 0,"onLocate handler should only be called when component is mounted. Thus video element is always defined."),M.length===0||o.track===void 0)D(R);else{const I=z.offsetWidth,x=z.offsetHeight,we=z.videoWidth,be=z.videoHeight,Pe=Math.max(I/we,x/be),Se=we*Pe,Ee=be*Pe,Fe=Se/we,it=Ee/be,st=(I-Se)/2,ct=(x-Ee)/2,Oe=({x:X,y:re})=>({x:Math.floor(X*Fe),y:Math.floor(re*it)}),Ie=({x:X,y:re})=>({x:Math.floor(X+st),y:Math.floor(re+ct)}),ut=M.map(X=>{const{boundingBox:re,cornerPoints:lt}=X,{x:me,y:dt}=Ie(Oe({x:re.x,y:re.y})),{x:Ue,y:le}=Oe({x:re.width,y:re.height});return{...X,cornerPoints:lt.map(Le=>Ie(Oe(Le))),boundingBox:DOMRectReadOnly.fromRect({x:me,y:dt,width:Ue,height:le})}});R.width=z.offsetWidth,R.height=z.offsetHeight;const ie=R.getContext("2d");o.track(ut,ie)}},A={width:"100%",height:"100%",position:"relative","z-index":"0"},k={width:"100%",height:"100%",position:"absolute",top:"0",left:"0"},Z={width:"100%",height:"100%","object-fit":"cover"},Q=At(()=>b.value?Z:{...Z,visibility:"hidden",position:"absolute"});return(M,R)=>(Rt(),Wt("div",{style:A},[et("video",{ref_key:"videoRef",ref:v,style:ua(Q.value),autoplay:"",muted:"",playsinline:""},null,4),la(et("canvas",{id:"qrcode-stream-pause-frame",ref_key:"pauseFrameRef",ref:d,style:Z},null,512),[[da,!b.value]]),et("canvas",{id:"qrcode-stream-tracking-layer",ref_key:"trackingLayerRef",ref:p,style:k},null,512),et("div",{style:k},[Ar(M.$slots,"default")])]))}}),Oi=kt({__name:"QrcodeCapture",props:{formats:{type:Array,default:()=>["qr_code"]}},emits:["detect"],setup(r,{emit:a}){const o=r,c=a,d=p=>{if(!(!(p.target instanceof HTMLInputElement)||!p.target.files))for(const v of Array.from(p.target.files))Vr(v,o.formats).then(C=>{c("detect",C)})};return(p,v)=>(Rt(),Wt("input",{onChange:d,type:"file",name:"image",accept:"image/*",capture:"environment",multiple:""},null,32))}}),Pi=["onDrop"],Ai=kt({__name:"QrcodeDropZone",props:{formats:{type:Array,default:()=>["qr_code"]}},emits:["detect","dragover","error"],setup(r,{emit:a}){const o=r,c=a,d=async C=>{try{const h=await C;c("detect",h)}catch(h){c("error",h)}},p=C=>{c("dragover",C)},v=({dataTransfer:C})=>{if(!C)return;p(!1);const h=[...Array.from(C.files)],w=C.getData("text/uri-list");h.forEach(T=>{d(Vr(T))}),w!==""&&d(Ga(w,o.formats))};return(C,h)=>(Rt(),Wt("div",{onDrop:tt(v,["prevent","stop"]),onDragenter:h[0]||(h[0]=tt(w=>p(!0),["prevent","stop"])),onDragleave:h[1]||(h[1]=tt(w=>p(!1),["prevent","stop"])),onDragover:h[2]||(h[2]=tt(()=>{},["prevent","stop"]))},[Ar(C.$slots,"default")],40,Pi))}});export{Ai as A,Oi as E,Ei as T};
