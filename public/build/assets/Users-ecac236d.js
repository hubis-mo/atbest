import{A as T}from"./AdminLayout-d2fce59f.js";import{_ as q}from"./_plugin-vue_export-helper-c27b6911.js";import{i as s,o as i,c as f,w as l,a as h,t as d,b as n,f as r,d as u,F as c,h as k,e as x,k as z}from"./app-78468d3b.js";import"./DropdownLink-c7da729b.js";import"./PieChartOutlined-7a16d42c.js";const N={components:{AdminLayout:T},props:["organizations","users","roles","permissions"],data(){return{modal:{isOpen:!1,data:{},title:"Modal",mode:""},teacherStateLabels:{},columns:[{title:"Username",i18n:"username",dataIndex:"name"},{title:"Email",i18n:"email",dataIndex:"email"},{title:"Organizations",i18n:"organizations",dataIndex:"organizations"},{title:"State",i18n:"state",dataIndex:"state"},{title:"Operation",i18n:"operation",dataIndex:"operation",key:"operation"}],rules:{name:{required:!0},email:{required:!0,type:"email"},password:{required:!0}},validateMessages:{required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},labelCol:{style:{width:"150px"}},verticalStyle:{display:"flex",height:"30px",lineHeight:"30px",width:"100%",marginLeft:"20px"}}},created(){},methods:{filterOption(e,a){return a.full_name.toLowerCase().indexOf(e.toLowerCase())>=0},createRecord(){this.modal.data={},this.modal.mode="CREATE",this.modal.title="create",this.modal.isOpen=!0},editRecord(e){this.modal.data={...e},this.modal.data.organization_ids=e.organizations.map(a=>a.id),this.modal.data.role_ids=e.roles.map(a=>a.id),this.modal.data.permission_ids=e.permissions.map(a=>a.id),this.modal.mode="EDIT",this.modal.title="edit",this.modal.isOpen=!0},storeRecord(){this.$refs.modalRef.validateFields().then(()=>{this.$inertia.post(route("admin.users.store"),this.modal.data,{onSuccess:e=>{this.modal.data={},this.modal.isOpen=!1},onError:e=>{console.log(e)}})}).catch(e=>{console.log(e)})},updateRecord(){console.log(this.modal.data),this.$inertia.patch(route("admin.users.update",this.modal.data.id),this.modal.data,{onSuccess:e=>{this.modal.data={},this.modal.isOpen=!1,console.log(e)},onError:e=>{console.log(e)}})},deleteRecord(e){this.$inertia.delete(route("admin.users.destroy"),e.id,{onSuccess:a=>{console.log(a)},onError:a=>{console.log(a)}})}}},B={class:"font-semibold text-xl text-gray-800 leading-tight"},D={class:"container mx-auto pt-5"},V={class:"bg-white relative shadow rounded-lg overflow-x-auto"},F={key:1,class:"list-decimal"};function M(e,a,_,H,o,p){const b=s("a-button"),E=s("a-popconfirm"),S=s("a-table"),v=s("a-input"),m=s("a-form-item"),O=s("a-select"),y=s("a-col"),C=s("a-checkbox"),R=s("a-checkbox-group"),U=s("a-row"),I=s("a-form"),L=s("a-modal"),A=s("AdminLayout");return i(),f(A,{title:"Dashboard"},{header:l(()=>[h("h2",B,d(e.$t("users")),1)]),default:l(()=>[h("button",{onClick:a[0]||(a[0]=t=>p.createRecord()),class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded my-3"},d(e.$t("create_user")),1),h("div",D,[h("div",V,[n(S,{dataSource:_.users,columns:o.columns},{headerCell:l(({column:t})=>[r(d(t.i18n?e.$t(t.i18n):t.title),1)]),bodyCell:l(({column:t,text:$,record:g,index:j})=>[t.dataIndex=="operation"?(i(),u(c,{key:0},[n(b,{onClick:w=>p.editRecord(g)},{default:l(()=>[r(d(e.$t("edit")),1)]),_:2},1032,["onClick"]),n(E,{title:e.$t("confirm_delete_record"),"ok-text":e.$t("yes"),"cancel-text":e.$t("no"),onConfirm:w=>p.deleteRecord(g)},{default:l(()=>[n(b,null,{default:l(()=>[r(d(e.$t("delete")),1)]),_:1})]),_:2},1032,["title","ok-text","cancel-text","onConfirm"])],64)):t.dataIndex=="organizations"?(i(),u("ol",F,[(i(!0),u(c,null,k(g.organizations,w=>(i(),u("li",null,d(w.abbr),1))),256))])):(i(),u(c,{key:2},[r(d(g[t.dataIndex]),1)],64))]),_:1},8,["dataSource","columns"])])]),n(L,{visible:o.modal.isOpen,"onUpdate:visible":a[10]||(a[10]=t=>o.modal.isOpen=t),title:e.$t(o.modal.title),width:"60%"},{footer:l(()=>[o.modal.mode=="EDIT"?(i(),f(b,{key:"Update",type:"primary",onClick:a[8]||(a[8]=t=>p.updateRecord())},{default:l(()=>[r(d(e.$t("update")),1)]),_:1})):x("",!0),o.modal.mode=="CREATE"?(i(),f(b,{key:"Store",type:"primary",onClick:a[9]||(a[9]=t=>p.storeRecord())},{default:l(()=>[r(d(e.$t("add")),1)]),_:1})):x("",!0)]),default:l(()=>[n(I,{ref:"modalRef",model:o.modal.data,name:"Teacher","label-col":{span:4},"wrapper-col":{span:20},autocomplete:"off",rules:o.rules,"validate-messages":o.validateMessages},{default:l(()=>[n(m,{label:e.$t("username"),name:"name"},{default:l(()=>[n(v,{value:o.modal.data.name,"onUpdate:value":a[1]||(a[1]=t=>o.modal.data.name=t)},null,8,["value"])]),_:1},8,["label"]),n(m,{label:e.$t("email"),name:"email"},{default:l(()=>[n(v,{value:o.modal.data.email,"onUpdate:value":a[2]||(a[2]=t=>o.modal.data.email=t)},null,8,["value"])]),_:1},8,["label"]),o.modal.mode=="CREATE"?(i(),f(m,{key:0,label:e.$t("password"),name:"password"},{default:l(()=>[n(v,{value:o.modal.data.password,"onUpdate:value":a[3]||(a[3]=t=>o.modal.data.password=t)},null,8,["value"])]),_:1},8,["label"])):x("",!0),n(m,{label:e.$t("organization_manager"),name:"organization_ids"},{default:l(()=>[n(O,{value:o.modal.data.organization_ids,"onUpdate:value":a[4]||(a[4]=t=>o.modal.data.organization_ids=t),mode:"multiple","show-search":"","filter-option":p.filterOption,options:_.organizations,fieldNames:{value:"id",label:"full_name"}},null,8,["value","filter-option","options"])]),_:1},8,["label"]),n(U,null,{default:l(()=>[n(y,{span:4}),n(y,{span:10},{default:l(()=>[n(m,{label:e.$t("roles"),name:"roles"},{default:l(()=>[n(R,{value:o.modal.data.role_ids,"onUpdate:value":a[5]||(a[5]=t=>o.modal.data.role_ids=t)},{default:l(()=>[(i(!0),u(c,null,k(_.roles,t=>(i(),f(C,{value:t.id,style:z(o.verticalStyle)},{default:l(()=>[r(d(t.name),1)]),_:2},1032,["value","style"]))),256))]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),n(y,{span:10},{default:l(()=>[n(m,{label:e.$t("permissions"),name:"permissions"},{default:l(()=>[n(R,{value:o.modal.data.permission_ids,"onUpdate:value":a[6]||(a[6]=t=>o.modal.data.permission_ids=t)},{default:l(()=>[(i(!0),u(c,null,k(_.permissions,t=>(i(),f(C,{value:t.id,style:z(o.verticalStyle)},{default:l(()=>[r(d(t.name),1)]),_:2},1032,["value","style"]))),256))]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1}),n(m,{label:e.$t("password"),name:"password"},{default:l(()=>[n(v,{value:o.modal.data.password,"onUpdate:value":a[7]||(a[7]=t=>o.modal.data.password=t)},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model","rules","validate-messages"])]),_:1},8,["visible","title"])]),_:1})}const W=q(N,[["render",M]]);export{W as default};
