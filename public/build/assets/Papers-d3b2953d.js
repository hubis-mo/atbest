import{O as S}from"./OrganizationLayout-e59c3130.js";import{C as U,_ as y}from"./ImageUploadAdapter-1b833612.js";import{_ as V}from"./_plugin-vue_export-helper-c27b6911.js";import{i,o as r,c as h,w as l,a as u,t as s,b as d,f as n,d as f,F as v,e as g}from"./app-78468d3b.js";import"./DropdownLink-c7da729b.js";import"./TeamOutlined-f908f4bf.js";import"./PieChartOutlined-7a16d42c.js";import"./FormOutlined-55ddf1ad.js";const A={components:{OrganizationLayout:S,ckeditor:U.component,UploadAdapter:y},props:["exam","users"],data(){return{dateFormat:"YYYY-MM-DD",modal:{isOpen:!1,data:{},title:"Modal",mode:""},columns:[{title:"User",i18n:"user",dataIndex:"user"},{title:"Score",i18n:"score",dataIndex:"score"},{title:"Submitted",i18n:"submitted",dataIndex:"submitted"},{title:"Valid At",i18n:"valid_at",dataIndex:"valid_at"},{title:"Expire At",i18n:"expire_at",dataIndex:"expire_at"},{title:"Operation",i18n:"operation",dataIndex:"operation",key:"operation"}],rules:{category_code:{required:!0},classify_id:{required:!0},title_en:{required:!0}},validateMessages:{required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},labelCol:{style:{width:"150px"}}}},created(){},mounted(){},methods:{createRecord(){this.modal.data={},this.modal.data.published=0,this.modal.mode="CREATE",this.modal.title="Create",this.modal.isOpen=!0},editRecord(e){this.modal.data={...e},this.modal.mode="EDIT",this.modal.title="Edit",this.modal.isOpen=!0},storeRecord(){this.$refs.modalRef.validateFields().then(()=>{this.$inertia.post(route("manage.exams.store"),this.modal.data,{onSuccess:e=>{this.modal.data={},this.modal.isOpen=!1},onError:e=>{console.log(e)}})}).catch(e=>{console.log(e)})},updateRecord(){console.log(this.modal.data),this.$refs.modalRef.validateFields().then(()=>{this.$inertia.put(route("manage.exams.update",this.modal.data.id),this.modal.data,{onSuccess:e=>{this.modal.data={},this.modal.isOpen=!1,console.log(e)},onError:e=>{console.log(e)}})}).catch(e=>{console.log("error",e)})},deleteConfirmed(e){this.$inertia.delete(route("manage.exams.destroy",e.id),{onSuccess:t=>{console.log(t)},onError:t=>{console.log(t)}})},deleteRecord(e){confirm("Are you sure want to remove?")&&this.$inertia.delete(route("manage.exams.destroy",e),{onSuccess:t=>{console.log(t)},onError:t=>{console.log(t)}})},createLogin(e){console.log("create login"+e)},uploader(e){e.plugins.get("FileRepository").createUploadAdapter=t=>new y(t)}}},D={class:"font-semibold text-xl text-gray-800 leading-tight"},T={class:"flex-auto pb-3 text-right"},q={class:"container mx-auto pt-5"},M={class:"bg-white relative shadow rounded-lg overflow-x-auto"},N={key:0},B={key:1};function L(e,t,b,Y,a,p){const c=i("a-button"),C=i("inertia-link"),E=i("a-table"),R=i("a-select"),_=i("a-form-item"),k=i("a-date-picker"),x=i("a-switch"),F=i("a-form"),w=i("a-modal"),O=i("OrganizationLayout");return r(),h(O,{title:"Dashboard"},{header:l(()=>[u("h2",D,s(e.$t("paper")),1)]),default:l(()=>[u("p",null,"Exam Title: "+s(b.exam.title),1),u("p",null,"Exam Category: "+s(b.exam.category),1),u("div",T,[d(c,{onClick:t[0]||(t[0]=o=>p.createRecord())},{default:l(()=>[n("Create")]),_:1})]),u("div",q,[u("div",M,[d(E,{dataSource:b.exam.papers,columns:a.columns},{headerCell:l(({column:o})=>[n(s(o.i18n?e.$t(o.i18n):o.title),1)]),bodyCell:l(({column:o,text:z,record:m,index:P})=>[o.dataIndex=="operation"?(r(),f(v,{key:0},[d(c,{onClick:I=>p.editRecord(m)},{default:l(()=>[n("Edit")]),_:2},1032,["onClick"]),d(c,{disabled:m.published,onClick:I=>p.deleteRecord(m)},{default:l(()=>[n(s(e.$t("delete")),1)]),_:2},1032,["disabled","onClick"]),d(C,{href:e.route("manage.paper.answers.index",m.id),class:"ant-btn"},{default:l(()=>[n("Answers")]),_:2},1032,["href"])],64)):g("",!0),o.dataIndex=="user"?(r(),f(v,{key:1},[n(s(m.user.name),1)],64)):(r(),f(v,{key:2},[n(s(m[o.dataIndex]),1)],64))]),_:1},8,["dataSource","columns"])])]),d(w,{visible:a.modal.isOpen,"onUpdate:visible":t[8]||(t[8]=o=>a.modal.isOpen=o),title:a.modal.title},{footer:l(()=>[a.modal.mode=="EDIT"?(r(),h(c,{key:"Update",type:"primary",onClick:t[6]||(t[6]=o=>p.updateRecord())},{default:l(()=>[n(s(e.$t("update")),1)]),_:1})):g("",!0),a.modal.mode=="CREATE"?(r(),h(c,{key:"Store",type:"primary",onClick:t[7]||(t[7]=o=>p.storeRecord())},{default:l(()=>[n(s(e.$t("add")),1)]),_:1})):g("",!0)]),default:l(()=>[d(F,{ref:"modalRef",model:a.modal.data,name:"Papers",layout:"vertical",autocomplete:"off",rules:a.rules,"validate-messages":a.validateMessages},{default:l(()=>[d(_,{label:e.$t("user_id"),name:"user_id"},{default:l(()=>[a.modal.data.user?(r(),f("span",N,s(a.modal.data.user.name),1)):(r(),f("span",B,[d(R,{value:a.modal.data.user_id,"onUpdate:value":t[1]||(t[1]=o=>a.modal.data.user_id=o),options:b.users,fieldNames:{value:"id",label:"name"}},null,8,["value","options"])]))]),_:1},8,["label"]),d(_,{label:e.$t("valid_at"),name:"valid_at"},{default:l(()=>[d(k,{value:a.modal.data.valid_at,"onUpdate:value":t[2]||(t[2]=o=>a.modal.data.valid_at=o),format:a.dateFormat,valueFormat:a.dateFormat},null,8,["value","format","valueFormat"])]),_:1},8,["label"]),d(_,{label:e.$t("expire_at"),name:"expire_at"},{default:l(()=>[d(k,{value:a.modal.data.expire_at,"onUpdate:value":t[3]||(t[3]=o=>a.modal.data.expire_at=o),format:a.dateFormat,valueFormat:a.dateFormat},null,8,["value","format","valueFormat"])]),_:1},8,["label"]),d(_,{label:e.$t("submitted"),name:"submitted"},{default:l(()=>[d(x,{checked:a.modal.submitted,"onUpdate:checked":t[4]||(t[4]=o=>a.modal.submitted=o),checkedValue:"true",unCheckValue:"false"},null,8,["checked"])]),_:1},8,["label"]),d(_,{label:e.$t("published"),name:"published"},{default:l(()=>[d(x,{checked:a.modal.published,"onUpdate:checked":t[5]||(t[5]=o=>a.modal.published=o),checkedValue:"true",unCheckValue:"false"},null,8,["checked"])]),_:1},8,["label"])]),_:1},8,["model","rules","validate-messages"])]),_:1},8,["visible","title"])]),_:1})}const Z=V(A,[["render",L]]);export{Z as default};
