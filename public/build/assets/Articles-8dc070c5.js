import{O as T}from"./OrganizationLayout-e59c3130.js";import{C as D,_ as g,a as N}from"./ImageUploadAdapter-1b833612.js";import{_ as q}from"./_plugin-vue_export-helper-c27b6911.js";import{i as n,o as m,c,w as i,a as p,t as r,b as o,f as s,d as h,F as v,e as y}from"./app-78468d3b.js";import"./DropdownLink-c7da729b.js";import"./TeamOutlined-f908f4bf.js";import"./PieChartOutlined-7a16d42c.js";import"./FormOutlined-55ddf1ad.js";const L={components:{OrganizationLayout:T,ckeditor:D.component,UploadAdapter:g},props:["classifies","articleCategories","articles"],data(){return{dateFormat:"YYYY-MM-DD",modal:{isOpen:!1,data:{content_en:""},title:"Modal",mode:""},teacherStateLabels:{},editor:N,editorData:"<p>Content of the editor.</p>",editorConfig:{extraPlugins:[function(e){e.plugins.get("FileRepository").createUploadAdapter=t=>new g(t)}]},columns:[{title:"Title",i18n:"title",dataIndex:"title_en"},{title:"Validated at",i18n:"valid_at",dataIndex:"valid_at"},{title:"Expired at",i18n:"expired_at",dataIndex:"expired_at"},{title:"Published",i18n:"published",dataIndex:"published"},{title:"Operation",i18n:"operation",dataIndex:"operation",key:"operation"}],rules:{category_code:{required:!0},classify_id:{required:!0},title_en:{required:!0}},validateMessages:{required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},labelCol:{style:{width:"150px"}}}},created(){},mounted(){},methods:{createRecord(){this.modal.data={},this.modal.data.public=0,this.modal.mode="CREATE",this.modal.title="Create",this.modal.isOpen=!0},editRecord(e){this.modal.data={...e},this.modal.mode="EDIT",this.modal.isOpen=!0},storeRecord(){this.$refs.modalRef.validateFields().then(()=>{this.$inertia.post(route("manage.articles.store"),this.modal.data,{onSuccess:e=>{this.modal.data={},this.modal.isOpen=!1},onError:e=>{console.log(e)}})}).catch(e=>{console.log(e)})},updateRecord(){console.log(this.modal.data),this.$refs.modalRef.validateFields().then(()=>{this.$inertia.put(route("manage.articles.update",this.modal.data.id),this.modal.data,{onSuccess:e=>{this.modal.data={},this.modal.isOpen=!1,console.log(e)},onError:e=>{console.log(e)}})}).catch(e=>{console.log("error",e)})},deleteConfirmed(e){this.$inertia.delete(route("manage.articles.destroy",e.id),{onSuccess:t=>{console.log(t)},onError:t=>{console.log(t)}})},createLogin(e){console.log("create login"+e)},uploader(e){e.plugins.get("FileRepository").createUploadAdapter=t=>new g(t)}}},M={class:"font-semibold text-xl text-gray-800 leading-tight"},B={class:"flex-auto pb-3 text-right"},Y={class:"container mx-auto pt-5"},z={class:"bg-white relative shadow rounded-lg overflow-x-auto"},P=p("p",null,"Article CAN NOT be delete if published.",-1);function $(e,t,k,K,a,f){const C=n("inertia-link"),_=n("a-button"),x=n("a-popconfirm"),E=n("a-table"),O=n("a-select"),d=n("a-form-item"),b=n("a-input"),R=n("ckeditor"),w=n("a-date-picker"),F=n("a-switch"),U=n("a-col"),V=n("a-row"),I=n("a-form"),A=n("a-modal"),S=n("OrganizationLayout");return m(),c(S,{title:"Dashboard"},{header:i(()=>[p("h2",M,r(e.$t("articles")),1)]),default:i(()=>[p("div",B,[o(C,{href:e.route("manage.articles.create"),class:"ant-btn ant-btn-primary"},{default:i(()=>[s(r(e.$t("create_article")),1)]),_:1},8,["href"])]),p("div",Y,[p("div",z,[o(E,{dataSource:k.articles,columns:a.columns},{headerCell:i(({column:l})=>[s(r(l.i18n?e.$t(l.i18n):l.title),1)]),bodyCell:i(({column:l,text:j,record:u,index:G})=>[l.dataIndex=="operation"?(m(),h(v,{key:0},[o(C,{href:e.route("manage.articles.edit",u.id),class:"ant-btn"},{default:i(()=>[s(r(e.$t("edit")),1)]),_:2},1032,["href"]),o(x,{title:e.$t("confirm_delete_record"),"ok-text":e.$t("yes"),"cancel-text":e.$t("no"),onConfirm:H=>f.deleteConfirmed(u),disabled:u.published==1},{default:i(()=>[o(_,{disabled:u.published==1},{default:i(()=>[s(r(e.$t("delete")),1)]),_:2},1032,["disabled"])]),_:2},1032,["title","ok-text","cancel-text","onConfirm","disabled"])],64)):l.dataIndex=="published"?(m(),h(v,{key:1},[s(r(u.published?e.$t("yes"):e.$t("no")),1)],64)):(m(),h(v,{key:2},[s(r(u[l.dataIndex]),1)],64))]),_:1},8,["dataSource","columns"])]),P]),o(A,{visible:a.modal.isOpen,"onUpdate:visible":t[12]||(t[12]=l=>a.modal.isOpen=l),title:a.modal.title,width:"100%"},{footer:i(()=>[a.modal.mode=="EDIT"?(m(),c(_,{key:"Update",type:"primary",onClick:t[10]||(t[10]=l=>f.updateRecord())},{default:i(()=>[s(r(e.$t("update")),1)]),_:1})):y("",!0),a.modal.mode=="CREATE"?(m(),c(_,{key:"Store",type:"primary",onClick:t[11]||(t[11]=l=>f.storeRecord())},{default:i(()=>[s(r(e.$t("add")),1)]),_:1})):y("",!0)]),default:i(()=>[o(I,{ref:"modalRef",model:a.modal.data,name:"Teacher",layout:"vertical",autocomplete:"off",rules:a.rules,"validate-messages":a.validateMessages},{default:i(()=>[o(d,{label:e.$t("article_category"),name:"category_code"},{default:i(()=>[o(O,{value:a.modal.data.category_code,"onUpdate:value":t[0]||(t[0]=l=>a.modal.data.category_code=l),options:k.articleCategories},null,8,["value","options"])]),_:1},8,["label"]),o(d,{label:e.$t("title_en"),name:"title_en"},{default:i(()=>[o(b,{value:a.modal.data.title_en,"onUpdate:value":t[1]||(t[1]=l=>a.modal.data.title_en=l)},null,8,["value"])]),_:1},8,["label"]),o(d,{label:e.$t("title_fn"),name:"title_fn"},{default:i(()=>[o(b,{value:a.modal.data.title_fn,"onUpdate:value":t[2]||(t[2]=l=>a.modal.data.title_fn=l)},null,8,["value"])]),_:1},8,["label"]),o(d,{label:e.$t("content"),name:"content_en"},{default:i(()=>[o(R,{editor:a.editor,modelValue:a.modal.data.content_en,"onUpdate:modelValue":t[3]||(t[3]=l=>a.modal.data.content_en=l),config:a.editorConfig},null,8,["editor","modelValue","config"])]),_:1},8,["label"]),o(d,{label:e.$t("valid_at"),name:"valid_at"},{default:i(()=>[o(w,{value:a.modal.data.valid_at,"onUpdate:value":t[4]||(t[4]=l=>a.modal.data.valid_at=l),format:a.dateFormat,valueFormat:a.dateFormat},null,8,["value","format","valueFormat"])]),_:1},8,["label"]),o(d,{label:e.$t("expired_at"),name:"expired_at"},{default:i(()=>[o(w,{value:a.modal.data.expire_at,"onUpdate:value":t[5]||(t[5]=l=>a.modal.data.expire_at=l),valueFormat:a.dateFormat},null,8,["value","valueFormat"])]),_:1},8,["label"]),o(d,{label:e.$t("url"),name:"url"},{default:i(()=>[o(b,{value:a.modal.data.url,"onUpdate:value":t[6]||(t[6]=l=>a.modal.data.url=l)},null,8,["value"])]),_:1},8,["label"]),o(V,null,{default:i(()=>[o(U,null,{default:i(()=>[o(d,{label:e.$t("published"),name:"published"},{default:i(()=>[o(F,{checked:a.modal.data.published,"onUpdate:checked":t[7]||(t[7]=l=>a.modal.data.published=l),checkedValue:1,unCheckedValue:0,onChange:t[8]||(t[8]=l=>a.modal.data.public=0)},null,8,["checked"])]),_:1},8,["label"])]),_:1}),a.modal.data.published?(m(),c(U,{key:0,class:"pl-10"},{default:i(()=>[o(d,{label:e.$t("public"),name:"public"},{default:i(()=>[o(F,{checked:a.modal.data.public,"onUpdate:checked":t[9]||(t[9]=l=>a.modal.data.public=l),checkedValue:1,unCheckedValue:0},null,8,["checked"])]),_:1},8,["label"])]),_:1})):y("",!0)]),_:1})]),_:1},8,["model","rules","validate-messages"])]),_:1},8,["visible","title"])]),_:1})}const le=q(L,[["render",$]]);export{le as default};
