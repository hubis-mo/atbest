import{M as k}from"./MemberLayout-005a6312.js";import{I as x,J as L,M as B,i as p,o as d,d as g,b as i,w as a,F as v,a as r,t as n,f as u,K as D,h as y,c as f,k as w,e as O}from"./app-78468d3b.js";import{_ as A}from"./_plugin-vue_export-helper-c27b6911.js";import"./NavLink-d1da715f.js";import"./DropdownLink-c7da729b.js";import"./ResponsiveNavLink-51fcef62.js";const N={components:{MemberLayout:k,dayjs:x,message:L,Modal:B},props:["member","competition","categories_weights","roles"],data(){return{modal:{isOpen:!1,title:"Application Failed",content:"Error message"},mode:null,dateFormat:"YYYY-MM-DD",dateList:["2023-01-02"],application:{},rules:{given_name:{required:!0},family_name:{required:!0},display_name:{required:!0},dob:{required:!0},gender:{required:!0},category:{required:!0},weight:{required:!0},role:{required:!0}},validateMessages:{required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},layout:{labelCol:{span:8},wrapperCol:{span:16}},virticalStyle:{display:"flex",height:"30px",lineHeight:"30px",marginLeft:"8px"}}},mounted(){this.application.competition_id=this.competition.id,this.application.member_id=this.member.id,this.application.given_name=this.member.given_name,this.application.family_name=this.member.family_name,this.application.middle_name=this.member.middle_name,this.application.display_name=this.member.display_name,this.application.gender=this.member.gender,this.application.dob=this.member.dob,this.application.email=this.member.email,this.application.mobile=this.member.mobile},created(){},methods:{onGenderChange(o){this.application.category&&this.weightSelection(o.target.value,this.application.category)},onCategoryChange(o){this.application.gender&&this.weightSelection(this.application.gender,o.target.value)},weightSelection(o,l){o=="M"?this.competition.weights=this.competition.categories_weights.find(m=>m.code==l).male:this.competition.weights=this.competition.categories_weights.find(m=>m.code==l).female},onFinish(){console.log(this.application),this.$inertia.post(route("member.competition.applications.store",this.competition.id),this.application,{onSuccess:o=>{console.log(o)},onError:o=>{this.modal.content=o.message,this.modal.isOpen=!0}})}}},T={class:"font-semibold text-xl text-gray-800 leading-tight"},V={class:"py-12"},Y={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},E={class:"p-5 bg-white overflow-hidden shadow-xl sm:rounded-lg"},H={id:"pure-html"},j=["innerHTML"],G={class:"flex flex-row item-center justify-center"},I=r("p",null,"Duplicate entry,",-1),P=r("p",null,"If you are Athlete, you may apply at most 2 categories in the same competition.",-1),z=r("p",null,"Or you may apply one role only.",-1);function J(o,l,m,K,e,h){const C=p("a-typography-title"),c=p("a-input"),s=p("a-form-item"),F=p("a-date-picker"),_=p("a-radio"),b=p("a-radio-group"),M=p("a-button"),U=p("a-form"),q=p("MemberLayout"),S=p("a-modal");return d(),g(v,null,[i(q,{title:"Dashboard"},{header:a(()=>[r("h2",T,n(o.$t("forms")),1)]),default:a(()=>[r("div",V,[r("div",Y,[r("div",E,[i(C,{level:3,class:"text-center"},{default:a(()=>[u(n(m.competition.title_fn),1)]),_:1}),i(C,{level:4},{default:a(()=>[u(n(o.$t("date"))+": "+n(m.competition.start_date)+" - "+n(m.competition.end_date),1)]),_:1}),r("div",H,[r("div",{innerHTML:m.competition.description},null,8,j)]),i(U,D({model:e.application},e.layout,{name:"nest-messages","validate-messages":e.validateMessages,layout:"vertical",rules:e.rules,onFinish:h.onFinish}),{default:a(()=>[i(s,{label:o.$t("given_name"),name:"given_name"},{default:a(()=>[i(c,{value:e.application.given_name,"onUpdate:value":l[0]||(l[0]=t=>e.application.given_name=t)},null,8,["value"])]),_:1},8,["label"]),i(s,{label:o.$t("family_name"),name:"family_name"},{default:a(()=>[i(c,{value:e.application.family_name,"onUpdate:value":l[1]||(l[1]=t=>e.application.family_name=t)},null,8,["value"])]),_:1},8,["label"]),i(s,{label:o.$t("middle_name"),name:"middle_name"},{default:a(()=>[i(c,{value:e.application.middle_name,"onUpdate:value":l[2]||(l[2]=t=>e.application.middle_name=t)},null,8,["value"])]),_:1},8,["label"]),i(s,{label:o.$t("display_name"),name:"display_name"},{default:a(()=>[i(c,{value:e.application.display_name,"onUpdate:value":l[3]||(l[3]=t=>e.application.display_name=t)},null,8,["value"])]),_:1},8,["label"]),i(s,{label:o.$t("dob"),name:"dob"},{default:a(()=>[i(F,{value:e.application.dob,"onUpdate:value":l[4]||(l[4]=t=>e.application.dob=t),format:e.dateFormat,valueFormat:e.dateFormat},null,8,["value","format","valueFormat"])]),_:1},8,["label"]),i(s,{label:o.$t("gender"),name:"gender"},{default:a(()=>[i(b,{value:e.application.gender,"onUpdate:value":l[5]||(l[5]=t=>e.application.gender=t),onChange:h.onGenderChange},{default:a(()=>[i(_,{value:"M"},{default:a(()=>[u(n(o.$t("male")),1)]),_:1}),i(_,{value:"F"},{default:a(()=>[u(n(o.$t("female")),1)]),_:1})]),_:1},8,["value","onChange"])]),_:1},8,["label"]),i(s,{label:o.$t("email"),name:"email"},{default:a(()=>[i(c,{value:e.application.email,"onUpdate:value":l[6]||(l[6]=t=>e.application.email=t)},null,8,["value"])]),_:1},8,["label"]),i(s,{label:o.$t("mobile_number"),name:"mobile"},{default:a(()=>[i(c,{value:e.application.mobile,"onUpdate:value":l[7]||(l[7]=t=>e.application.mobile=t)},null,8,["value"])]),_:1},8,["label"]),i(s,{label:o.$t("role"),name:"role"},{default:a(()=>[i(b,{value:e.application.role,"onUpdate:value":l[8]||(l[8]=t=>e.application.role=t)},{default:a(()=>[(d(!0),g(v,null,y(m.competition.roles,t=>(d(),f(_,{style:w(e.virticalStyle),value:t.value},{default:a(()=>[u(n(t.label),1)]),_:2},1032,["style","value"]))),256))]),_:1},8,["value"])]),_:1},8,["label"]),e.application.role=="athlete"&&e.application.gender!=""?(d(),g(v,{key:0},[i(s,{label:o.$t("category"),name:"category"},{default:a(()=>[i(b,{value:e.application.category,"onUpdate:value":l[9]||(l[9]=t=>e.application.category=t)},{default:a(()=>[(d(!0),g(v,null,y(m.competition.categories_weights,t=>(d(),f(_,{style:w(e.virticalStyle),value:t.code,onChange:h.onCategoryChange},{default:a(()=>[u(n(t.name),1)]),_:2},1032,["style","value","onChange"]))),256))]),_:1},8,["value"])]),_:1},8,["label"]),u(" "+n(m.competition)+" ",1),i(s,{label:o.$t("weight"),name:"weight"},{default:a(()=>[i(b,{value:e.application.weight,"onUpdate:value":l[10]||(l[10]=t=>e.application.weight=t)},{default:a(()=>[(d(!0),g(v,null,y(m.competition.weights,t=>(d(),f(_,{style:w(e.virticalStyle),value:t.code},{default:a(()=>[u(n(t.name),1)]),_:2},1032,["style","value"]))),256))]),_:1},8,["value"])]),_:1},8,["label"])],64)):O("",!0),r("div",G,[i(M,{type:"primary","html-type":"submit"},{default:a(()=>[u(n(o.$t("submit")),1)]),_:1})])]),_:1},16,["model","validate-messages","rules","onFinish"])])])])]),_:1}),i(S,{visible:e.modal.isOpen,"onUpdate:visible":l[11]||(l[11]=t=>e.modal.isOpen=t),title:e.modal.title,cancelButtonProps:{style:"display:none"},okText:"$t{'understand'}"},{default:a(()=>[I,P,z,r("p",null,n(e.modal.content),1)]),_:1},8,["visible","title"])],64)}const ee=A(N,[["render",J]]);export{ee as default};
