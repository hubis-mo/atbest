import{A as I}from"./AdminLayout-d2fce59f.js";import{_ as E}from"./_plugin-vue_export-helper-c27b6911.js";import{i,o as s,c as p,w as l,a as f,t as d,b as n,f as r,d as y,F as h,e as k}from"./app-78468d3b.js";import"./DropdownLink-c7da729b.js";import"./PieChartOutlined-7a16d42c.js";const O={components:{AdminLayout:I},props:["organizations","users","configs"],data(){return{modal:{isOpen:!1,data:{},title:"Modal",mode:""},teacherStateLabels:{},columns:[{title:"Organization",i18n:"organization",dataIndex:"organization_id"},{title:"Key",i18n:"key",dataIndex:"key"},{title:"Operation",i18n:"operation",dataIndex:"operation",key:"operation"}],rules:{name:{required:!0},email:{required:!0,type:"email"},password:{required:!0}},validateMessages:{required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},labelCol:{style:{width:"150px"}}}},created(){this.organizations.unshift({id:0,full_name:"General Config Item"})},methods:{createRecord(){this.modal.data={},this.modal.mode="CREATE",this.modal.title="create",this.modal.isOpen=!0},editRecord(a){this.modal.data={...a},this.modal.mode="EDIT",this.modal.title="edit",this.modal.isOpen=!0},storeRecord(){this.$refs.modalRef.validateFields().then(()=>{this.$inertia.post(route("admin.configs.store"),this.modal.data,{onSuccess:a=>{this.modal.data={},this.modal.isOpen=!1},onError:a=>{console.log(a)}})}).catch(a=>{console.log(a)})},updateRecord(){console.log(this.modal.data),this.$inertia.patch(route("admin.configs.update",this.modal.data.id),this.modal.data,{onSuccess:a=>{this.modal.data={},this.modal.isOpen=!1,console.log(a)},onError:a=>{console.log(a)}})}}},S={class:"font-semibold text-xl text-gray-800 leading-tight"},U={class:"container mx-auto pt-5"},A={class:"bg-white relative shadow rounded-lg overflow-x-auto"};function T(a,o,b,q,t,m){const c=i("a-button"),C=i("a-table"),g=i("a-input"),x=i("a-select"),u=i("a-form-item"),_=i("a-textarea"),w=i("a-form"),R=i("a-modal"),z=i("AdminLayout");return s(),p(z,{title:"Dashboard"},{header:l(()=>[f("h2",S,d(a.$t("configs")),1)]),default:l(()=>[f("button",{onClick:o[0]||(o[0]=e=>m.createRecord()),class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded my-3"},d(a.$t("create_config_item")),1),f("div",U,[f("div",A,[n(C,{dataSource:b.configs,columns:t.columns},{headerCell:l(({column:e})=>[r(d(e.i18n?a.$t(e.i18n):e.title),1)]),bodyCell:l(({column:e,text:N,record:v,index:B})=>[e.dataIndex=="operation"?(s(),p(c,{key:0,onClick:D=>m.editRecord(v)},{default:l(()=>[r(d(a.$t("edit")),1)]),_:2},1032,["onClick"])):e.dataIndex=="organization_id"?(s(),y(h,{key:1},[r(d(v[e.dataIndex]),1)],64)):(s(),y(h,{key:2},[r(d(v[e.dataIndex]),1)],64))]),_:1},8,["dataSource","columns"])])]),n(R,{visible:t.modal.isOpen,"onUpdate:visible":o[8]||(o[8]=e=>t.modal.isOpen=e),title:a.$t(t.modal.title),width:"60%"},{footer:l(()=>[t.modal.mode=="EDIT"?(s(),p(c,{key:"Update",type:"primary",onClick:o[6]||(o[6]=e=>m.updateRecord())},{default:l(()=>[r(d(a.$t("update")),1)]),_:1})):k("",!0),t.modal.mode=="CREATE"?(s(),p(c,{key:"Store",type:"primary",onClick:o[7]||(o[7]=e=>m.storeRecord())},{default:l(()=>[r(d(a.$t("add")),1)]),_:1})):k("",!0)]),default:l(()=>[n(w,{ref:"modalRef",model:t.modal.data,name:"Teacher","label-col":{span:8},"wrapper-col":{span:16},autocomplete:"off",rules:t.rules,"validate-messages":t.validateMessages},{default:l(()=>[n(g,{type:"hidden",value:t.modal.data.id,"onUpdate:value":o[1]||(o[1]=e=>t.modal.data.id=e)},null,8,["value"]),n(u,{label:a.$t("organization"),name:"organization_id"},{default:l(()=>[n(x,{value:t.modal.data.organization_id,"onUpdate:value":o[2]||(o[2]=e=>t.modal.data.organization_id=e),options:b.organizations,fieldNames:{value:"id",label:"full_name"}},null,8,["value","options"])]),_:1},8,["label"]),n(u,{label:a.$t("key"),name:"key"},{default:l(()=>[n(g,{value:t.modal.data.key,"onUpdate:value":o[3]||(o[3]=e=>t.modal.data.key=e)},null,8,["value"])]),_:1},8,["label"]),n(u,{label:a.$t("value"),name:"value"},{default:l(()=>[n(_,{value:t.modal.data.value,"onUpdate:value":o[4]||(o[4]=e=>t.modal.data.value=e),rows:15},null,8,["value"])]),_:1},8,["label"]),n(u,{label:a.$t("remark"),name:"remark"},{default:l(()=>[n(_,{value:t.modal.data.remark,"onUpdate:value":o[5]||(o[5]=e=>t.modal.data.remark=e)},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model","rules","validate-messages"])]),_:1},8,["visible","title"])]),_:1})}const G=E(O,[["render",T]]);export{G as default};
