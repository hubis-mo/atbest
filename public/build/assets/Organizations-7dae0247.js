import{A as O}from"./AdminLayout-d2fce59f.js";import{_ as A}from"./_plugin-vue_export-helper-c27b6911.js";import{i as r,o as u,c as h,w as n,a as _,t as s,b as o,f as m,d as b,F as k,h as V,e as U}from"./app-78468d3b.js";import"./DropdownLink-c7da729b.js";import"./PieChartOutlined-7a16d42c.js";const D={components:{AdminLayout:O},props:["regions","organizations","users"],data(){return{modal:{isOpen:!1,data:{},title:"Modal",mode:""},organizationStates:[{value:"ACTIVE",label:"Active"},{value:"SUSPENDED",label:"Suspended"}],columns:[{title:"Region",i18n:"region",dataIndex:"region"},{title:"Abbreviation",i18n:"abbreviation",dataIndex:"abbr"},{title:"Full name",i18n:"full_name",dataIndex:"full_name"},{title:"Email",i18n:"email",dataIndex:"email"},{title:"Manager",i18n:"manager",dataIndex:"manager"},{title:"Operation",i18n:"operation",dataIndex:"operation",key:"operation"}],rules:{name_zh:{required:!0},title:{required:!0},email:{required:!0},mobile:{required:!0},card_style:{required:!0}},validateMessages:{required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},labelCol:{style:{width:"150px"}}}},created(){},methods:{createRecord(){this.modal.data={},this.modal.mode="CREATE",this.modal.title="Create Record",this.modal.isOpen=!0},editRecord(l){this.modal.data={...l},this.modal.data.user_ids=l.users.map(e=>e.id),this.modal.mode="EDIT",this.modal.title="Edit Record",this.modal.isOpen=!0},storeRecord(){this.$refs.modalRef.validateFields().then(()=>{this.$inertia.post(route("admin.organizations.store"),this.modal.data,{onSuccess:l=>{this.modal.data={},this.modal.isOpen=!1},onError:l=>{console.log(l)}})}).catch(l=>{console.log(l)})},updateRecord(){console.log(this.modal.data),this.$refs.modalRef.validateFields().then(()=>{this.$inertia.patch(route("admin.organizations.update",this.modal.data.id),this.modal.data,{onSuccess:l=>{this.modal.data={},this.modal.isOpen=!1,console.log(l)},onError:l=>{console.log(l)}})}).catch(l=>{console.log("error",l)})},deleteRecord(l){this.$inertia.delete(route("admin.organizations.destroy",l.id),{onSuccess:e=>{console.log(e)},onError:e=>{console.log(e)}})}}},N={class:"font-semibold text-xl text-gray-800 leading-tight"},T={class:"container mx-auto pt-5"},x={class:"bg-white relative shadow rounded-lg overflow-x-auto"},F={key:2,class:"list-decimal"};function B(l,e,g,L,t,v){const C=r("inertia-link"),y=r("a-button"),R=r("a-popconfirm"),E=r("a-table"),i=r("a-input"),c=r("a-select"),d=r("a-form-item"),I=r("a-textarea"),w=r("a-switch"),z=r("a-form"),S=r("a-modal"),q=r("AdminLayout");return u(),h(q,{title:"Dashboard"},{header:n(()=>[_("h2",N,s(l.$t("organizations")),1)]),default:n(()=>[_("button",{onClick:e[0]||(e[0]=a=>v.createRecord()),class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded my-3"},s(l.$t("create_organization")),1),_("div",T,[_("div",x,[o(E,{dataSource:g.organizations,columns:t.columns},{headerCell:n(({column:a})=>[m(s(a.i18n?l.$t(a.i18n):a.title),1)]),bodyCell:n(({column:a,text:M,record:p,index:P})=>[a.dataIndex=="operation"?(u(),b(k,{key:0},[o(C,{href:l.route("admin.organization.members",p.id),class:"ant-btn"},{default:n(()=>[m(s(l.$t("members")),1)]),_:2},1032,["href"]),o(y,{onClick:f=>v.editRecord(p)},{default:n(()=>[m(s(l.$t("edit")),1)]),_:2},1032,["onClick"]),o(R,{title:l.$t("confirm_delete_record"),"ok-text":l.$t("yes"),"cancel-text":l.$t("no"),onConfirm:f=>v.deleteRecord(p)},{default:n(()=>[o(y,null,{default:n(()=>[m(s(l.$t("delete")),1)]),_:1})]),_:2},1032,["title","ok-text","cancel-text","onConfirm"])],64)):a.dataIndex=="region"?(u(),b(k,{key:1},[m(s(g.regions.find(f=>f.value==p[a.dataIndex]).label),1)],64)):a.dataIndex=="manager"?(u(),b("ol",F,[(u(!0),b(k,null,V(p.users,f=>(u(),b("li",null,s(f.name),1))),256))])):(u(),b(k,{key:3},[m(s(p[a.dataIndex]),1)],64))]),_:1},8,["dataSource","columns"])])]),o(S,{visible:t.modal.isOpen,"onUpdate:visible":e[20]||(e[20]=a=>t.modal.isOpen=a),title:t.modal.title,width:"60%"},{footer:n(()=>[t.modal.mode=="EDIT"?(u(),h(y,{key:"Update",type:"primary",onClick:e[18]||(e[18]=a=>v.updateRecord())},{default:n(()=>[m(s(l.$t("update")),1)]),_:1})):U("",!0),t.modal.mode=="CREATE"?(u(),h(y,{key:"Store",type:"primary",onClick:e[19]||(e[19]=a=>v.storeRecord())},{default:n(()=>[m(s(l.$t("add")),1)]),_:1})):U("",!0)]),default:n(()=>[o(z,{ref:"modalRef",model:t.modal.data,name:"Organization","label-col":{span:8},"wrapper-col":{span:16},autocomplete:"off",rules:t.rules,"validate-messages":t.validateMessages},{default:n(()=>[o(i,{type:"hidden",value:t.modal.data.id,"onUpdate:value":e[1]||(e[1]=a=>t.modal.data.id=a)},null,8,["value"]),o(d,{label:l.$t("region"),name:"region",rules:[{required:!0}]},{default:n(()=>[o(c,{value:t.modal.data.region,"onUpdate:value":e[2]||(e[2]=a=>t.modal.data.region=a),options:g.regions},null,8,["value","options"])]),_:1},8,["label"]),o(d,{label:l.$t("abbreviation"),name:"abbr",rules:[{required:!0}]},{default:n(()=>[o(i,{value:t.modal.data.abbr,"onUpdate:value":e[3]||(e[3]=a=>t.modal.data.abbr=a)},null,8,["value"])]),_:1},8,["label"]),o(d,{label:l.$t("country"),name:"country"},{default:n(()=>[o(i,{value:t.modal.data.country,"onUpdate:value":e[4]||(e[4]=a=>t.modal.data.country=a)},null,8,["value"])]),_:1},8,["label"]),o(d,{label:l.$t("full_name"),name:"full_name",rules:[{required:!0}]},{default:n(()=>[o(i,{value:t.modal.data.full_name,"onUpdate:value":e[5]||(e[5]=a=>t.modal.data.full_name=a)},null,8,["value"])]),_:1},8,["label"]),o(d,{label:l.$t("title"),name:"title"},{default:n(()=>[o(i,{value:t.modal.data.title,"onUpdate:value":e[6]||(e[6]=a=>t.modal.data.title=a)},null,8,["value"])]),_:1},8,["label"]),o(d,{label:l.$t("email"),name:"email"},{default:n(()=>[o(i,{value:t.modal.data.email,"onUpdate:value":e[7]||(e[7]=a=>t.modal.data.email=a)},null,8,["value"])]),_:1},8,["label"]),o(d,{label:l.$t("phone"),name:"phone"},{default:n(()=>[o(i,{value:t.modal.data.phone,"onUpdate:value":e[8]||(e[8]=a=>t.modal.data.phone=a)},null,8,["value"])]),_:1},8,["label"]),o(d,{label:l.$t("address"),name:"address"},{default:n(()=>[o(i,{value:t.modal.data.address,"onUpdate:value":e[9]||(e[9]=a=>t.modal.data.address=a)},null,8,["value"])]),_:1},8,["label"]),o(d,{label:l.$t("website"),name:"href"},{default:n(()=>[o(i,{value:t.modal.data.href,"onUpdate:value":e[10]||(e[10]=a=>t.modal.data.href=a)},null,8,["value"])]),_:1},8,["label"]),o(d,{label:l.$t("registration_code"),name:"registration_code"},{default:n(()=>[o(i,{value:t.modal.data.registration_code,"onUpdate:value":e[11]||(e[11]=a=>t.modal.data.registration_code=a)},null,8,["value"])]),_:1},8,["label"]),o(d,{label:l.$t("avatar"),name:"avatar"},{default:n(()=>[o(i,{value:t.modal.data.avatar,"onUpdate:value":e[12]||(e[12]=a=>t.modal.data.avatar=a)},null,8,["value"])]),_:1},8,["label"]),o(d,{label:l.$t("card_style"),name:"card_style"},{default:n(()=>[o(i,{value:t.modal.data.card_style,"onUpdate:value":e[13]||(e[13]=a=>t.modal.data.card_style=a)},null,8,["value"])]),_:1},8,["label"]),o(d,{label:l.$t("content"),name:"content"},{default:n(()=>[o(I,{value:t.modal.data.content,"onUpdate:value":e[14]||(e[14]=a=>t.modal.data.content=a)},null,8,["value"])]),_:1},8,["label"]),o(d,{label:l.$t("president"),name:"president"},{default:n(()=>[o(i,{value:t.modal.data.president,"onUpdate:value":e[15]||(e[15]=a=>t.modal.data.president=a)},null,8,["value"])]),_:1},8,["label"]),o(d,{label:l.$t("status"),name:"status"},{default:n(()=>[o(w,{checked:t.modal.data.status,"onUpdate:checked":e[16]||(e[16]=a=>t.modal.data.status=a),checkedValue:1,unCheckedValue:0},null,8,["checked"])]),_:1},8,["label"]),o(d,{label:l.$t("manager"),name:"manager"},{default:n(()=>[o(c,{value:t.modal.data.user_ids,"onUpdate:value":e[17]||(e[17]=a=>t.modal.data.user_ids=a),mode:"multiple",options:g.users,fieldNames:{value:"id",label:"name"}},null,8,["value","options"])]),_:1},8,["label"])]),_:1},8,["model","rules","validate-messages"])]),_:1},8,["visible","title"])]),_:1})}const Q=A(D,[["render",B]]);export{Q as default};
