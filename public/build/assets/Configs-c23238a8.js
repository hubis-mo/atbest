import{O}from"./OrganizationLayout-e59c3130.js";import{_ as E}from"./_plugin-vue_export-helper-c27b6911.js";import{i,o as s,c as f,w as l,a as g,b as n,f as d,t as r,d as v,F as h,e as _}from"./app-78468d3b.js";import"./DropdownLink-c7da729b.js";import"./TeamOutlined-f908f4bf.js";import"./PieChartOutlined-7a16d42c.js";import"./FormOutlined-55ddf1ad.js";const I={components:{OrganizationLayout:O},props:["configs"],data(){return{modal:{isOpen:!1,data:{},title:"Modal",mode:""},teacherStateLabels:{},columns:[{title:"Key",dataIndex:"key"},{title:"Value",dataIndex:"value"},{title:"操作",dataIndex:"operation",key:"operation",i18n:"operation"}],rules:{name_zh:{required:!0},mobile:{required:!0},state:{required:!0}},validateMessages:{required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},labelCol:{style:{width:"150px"}}}},created(){},methods:{createRecord(){this.modal.data={},this.modal.mode="CREATE",this.modal.title="Create config item",this.modal.isOpen=!0},editRecord(t){this.modal.data={...t},this.modal.mode="EDIT",this.modal.title="Edit config item",this.modal.isOpen=!0},storeRecord(){this.$refs.modalRef.validateFields().then(()=>{this.$inertia.post("/admin/teachers/",this.modal.data,{onSuccess:t=>{this.modal.data={},this.modal.isOpen=!1},onError:t=>{console.log(t)}})}).catch(t=>{console.log(t)})},updateRecord(){console.log(this.modal.data),this.$refs.modalRef.validateFields().then(()=>{this.$inertia.patch("/admin/teachers/"+this.modal.data.id,this.modal.data,{onSuccess:t=>{this.modal.data={},this.modal.isOpen=!1,console.log(t)},onError:t=>{console.log(t)}})}).catch(t=>{console.log("error",t)})}}},S=g("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Certificates ",-1),U={class:"flex-auto pb-3 text-right"};function w(t,o,y,T,a,u){const p=i("a-button"),k=i("a-table"),m=i("a-input"),c=i("a-form-item"),C=i("a-form"),x=i("a-modal"),R=i("OrganizationLayout");return s(),f(R,{title:"Dashboard",organization:t.organization},{header:l(()=>[S]),default:l(()=>[g("div",U,[n(p,{type:"primary",class:"!rounded",onClick:o[0]||(o[0]=e=>u.createRecord())},{default:l(()=>[d("Create Certificate")]),_:1})]),n(k,{dataSource:y.configs,columns:a.columns},{headerCell:l(({column:e})=>[d(r(e.i18n?t.$t(e.i18n):e.title),1)]),bodyCell:l(({column:e,text:z,record:b,index:q})=>[e.dataIndex=="operation"?(s(),f(p,{key:0,onClick:L=>u.editRecord(b)},{default:l(()=>[d(r(t.$t("edit")),1)]),_:2},1032,["onClick"])):e.dataIndex=="state"?(s(),v(h,{key:1},[d(r(a.teacherStateLabels[z]),1)],64)):(s(),v(h,{key:2},[d(r(b[e.dataIndex]),1)],64))]),_:1},8,["dataSource","columns"]),n(x,{visible:a.modal.isOpen,"onUpdate:visible":o[8]||(o[8]=e=>a.modal.isOpen=e),title:a.modal.title,width:"60%"},{footer:l(()=>[a.modal.mode=="EDIT"?(s(),f(p,{key:"Update",type:"primary",onClick:o[6]||(o[6]=e=>u.updateRecord())},{default:l(()=>[d(r(t.$t("update")),1)]),_:1})):_("",!0),a.modal.mode=="CREATE"?(s(),f(p,{key:"Store",type:"primary",onClick:o[7]||(o[7]=e=>u.storeRecord())},{default:l(()=>[d(r(t.$t("add")),1)]),_:1})):_("",!0)]),default:l(()=>[n(C,{ref:"modalRef",model:a.modal.data,name:"Teacher","label-col":{span:8},"wrapper-col":{span:16},autocomplete:"off",rules:a.rules,"validate-messages":a.validateMessages},{default:l(()=>[n(m,{type:"hidden",value:a.modal.data.id,"onUpdate:value":o[1]||(o[1]=e=>a.modal.data.id=e)},null,8,["value"]),n(c,{label:"姓名(中文)",name:"name_zh"},{default:l(()=>[n(m,{value:a.modal.data.name_zh,"onUpdate:value":o[2]||(o[2]=e=>a.modal.data.name_zh=e)},null,8,["value"])]),_:1}),n(c,{label:"姓名(外文)",name:"name_zh"},{default:l(()=>[n(m,{value:a.modal.data.name_fn,"onUpdate:value":o[3]||(o[3]=e=>a.modal.data.name_fn=e)},null,8,["value"])]),_:1}),n(c,{label:"別名",name:"nickname"},{default:l(()=>[n(m,{value:a.modal.data.nickname,"onUpdate:value":o[4]||(o[4]=e=>a.modal.data.nickname=e)},null,8,["value"])]),_:1}),n(c,{label:"手機",name:"mobile"},{default:l(()=>[n(m,{value:a.modal.data.mobile,"onUpdate:value":o[5]||(o[5]=e=>a.modal.data.mobile=e)},null,8,["value"])]),_:1})]),_:1},8,["model","rules","validate-messages"])]),_:1},8,["visible","title"])]),_:1},8,["organization"])}const K=E(I,[["render",w]]);export{K as default};
