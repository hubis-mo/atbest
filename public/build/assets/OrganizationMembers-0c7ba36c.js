import{A as E}from"./AdminLayout-d2fce59f.js";import{_ as I}from"./_plugin-vue_export-helper-c27b6911.js";import{i as d,o as i,c as f,w as l,a as O,t as s,b as n,f as u,d as p,e as c,F as v}from"./app-78468d3b.js";import"./DropdownLink-c7da729b.js";import"./PieChartOutlined-7a16d42c.js";const S={components:{AdminLayout:E},props:["members"],data(){return{modal:{isOpen:!1,data:{},title:"Modal",mode:""},teacherStateLabels:{},columns:[{title:"Given Name",i18n:"given_name",dataIndex:"given_name"},{title:"Family Name",i18n:"family_name",dataIndex:"family_name"},{title:"Gender",i18n:"gender",dataIndex:"gender"},{title:"Dob",i18n:"dob",dataIndex:"dob"},{title:"Login Username",i18n:"login_username",dataIndex:"login"},{title:"Operation",i18n:"operation",dataIndex:"operation",key:"operation"}],rules:{name_zh:{required:!0},mobile:{required:!0},state:{required:!0}},validateMessages:{required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},labelCol:{style:{width:"150px"}}}},created(){},methods:{createRecord(){this.modal.data={},this.modal.mode="CREATE",this.modal.title="create",this.modal.isOpen=!0},editRecord(e){this.modal.data={...e},this.modal.mode="EDIT",this.modal.title="edit",this.modal.isOpen=!0},storeRecord(){this.$refs.modalRef.validateFields().then(()=>{this.$inertia.post("/admin/teachers/",this.modal.data,{onSuccess:e=>{this.modal.data={},this.modal.isOpen=!1},onError:e=>{console.log(e)}})}).catch(e=>{console.log(e)})},updateRecord(){console.log(this.modal.data),this.$refs.modalRef.validateFields().then(()=>{this.$inertia.patch("/admin/teachers/"+this.modal.data.id,this.modal.data,{onSuccess:e=>{this.modal.data={},this.modal.isOpen=!1,console.log(e)},onError:e=>{console.log(e)}})}).catch(e=>{console.log("error",e)})},deleteRecord(e){console.log(e),confirm("Are you sure want to remove?")&&this.$inertia.delete("/admin/teachers/"+e,{onSuccess:t=>{console.log(t)},onError:t=>{console.log(t)}})}}},U={class:"font-semibold text-xl text-gray-800 leading-tight"},w={key:0};function z(e,t,g,A,o,_){const y=d("a-table"),m=d("a-input"),r=d("a-form-item"),k=d("a-select"),R=d("a-form"),h=d("a-button"),x=d("a-modal"),C=d("AdminLayout");return i(),f(C,{title:"Dashboard"},{header:l(()=>[O("h2",U,s(e.$t("organization_members")),1)]),default:l(()=>[n(y,{dataSource:g.members,columns:o.columns},{headerCell:l(({column:a})=>[u(s(a.i18n?e.$t(a.i18n):a.title),1)]),bodyCell:l(({column:a,text:N,record:b,index:T})=>[a.dataIndex=="operation"?(i(),p(v,{key:0},[],64)):a.dataIndex=="login"?(i(),p(v,{key:1},[b.user?(i(),p("span",w,s(b.user.email),1)):c("",!0)],64)):(i(),p(v,{key:2},[u(s(b[a.dataIndex]),1)],64))]),_:1},8,["dataSource","columns"]),n(x,{visible:o.modal.isOpen,"onUpdate:visible":t[8]||(t[8]=a=>o.modal.isOpen=a),title:e.$t(o.modal.title),width:"60%"},{footer:l(()=>[o.modal.mode=="EDIT"?(i(),f(h,{key:"Update",type:"primary",onClick:t[6]||(t[6]=a=>_.updateRecord())},{default:l(()=>[u(s(e.$t("update")),1)]),_:1})):c("",!0),o.modal.mode=="CREATE"?(i(),f(h,{key:"Store",type:"primary",onClick:t[7]||(t[7]=a=>_.storeRecord())},{default:l(()=>[u(s(e.$t("add")),1)]),_:1})):c("",!0)]),default:l(()=>[n(R,{ref:"modalRef",model:o.modal.data,name:"Teacher","label-col":{span:8},"wrapper-col":{span:16},autocomplete:"off",rules:o.rules,"validate-messages":o.validateMessages},{default:l(()=>[n(m,{type:"hidden",value:o.modal.data.id,"onUpdate:value":t[0]||(t[0]=a=>o.modal.data.id=a)},null,8,["value"]),n(r,{label:e.$t("name_zh"),name:"name_zh"},{default:l(()=>[n(m,{value:o.modal.data.name_zh,"onUpdate:value":t[1]||(t[1]=a=>o.modal.data.name_zh=a)},null,8,["value"])]),_:1},8,["label"]),n(r,{label:e.$t("name_fn"),name:"name_fn"},{default:l(()=>[n(m,{value:o.modal.data.name_fn,"onUpdate:value":t[2]||(t[2]=a=>o.modal.data.name_fn=a)},null,8,["value"])]),_:1},8,["label"]),n(r,{label:e.$t("nickname"),name:"nickname"},{default:l(()=>[n(m,{value:o.modal.data.nickname,"onUpdate:value":t[3]||(t[3]=a=>o.modal.data.nickname=a)},null,8,["value"])]),_:1},8,["label"]),n(r,{label:e.$t("mobile_number"),name:"mobile"},{default:l(()=>[n(m,{value:o.modal.data.mobile,"onUpdate:value":t[4]||(t[4]=a=>o.modal.data.mobile=a)},null,8,["value"])]),_:1},8,["label"]),n(r,{label:e.$t("status"),name:"status"},{default:l(()=>[n(k,{value:o.modal.data.state,"onUpdate:value":t[5]||(t[5]=a=>o.modal.data.state=a),options:e.employmentStates},null,8,["value","options"])]),_:1},8,["label"])]),_:1},8,["model","rules","validate-messages"])]),_:1},8,["visible","title"])]),_:1})}const M=I(S,[["render",z]]);export{M as default};
