import{O as S}from"./OrganizationLayout-e59c3130.js";import{q as T}from"./index-d20420be.js";import{_ as z}from"./_plugin-vue_export-helper-c27b6911.js";import{R as A}from"./RestFilled-9a3a2187.js";import{U as D}from"./UploadOutlined-e5283a52.js";import{i,o as r,c as f,w as l,a as p,b as a,d as _,f as s,F as g,t as F,e as h}from"./app-78468d3b.js";import"./DropdownLink-c7da729b.js";import"./TeamOutlined-f908f4bf.js";import"./PieChartOutlined-7a16d42c.js";import"./FormOutlined-55ddf1ad.js";const B={components:{OrganizationLayout:S,UploadOutlined:D,RestFilled:A,quillEditor:T},props:["approbates"],data(){return{modal:{isOpen:!1,data:{},title:"Modal",mode:""},columns:[{title:"Name",dataIndex:"name"},{title:"Title",dataIndex:"title"},{title:"Require_login",dataIndex:"require_login"},{title:"For Staff",dataIndex:"for_staff"},{title:"Published",dataIndex:"published"},{title:"Action",dataIndex:"operation",key:"operation"}],rules:{field:{required:!0},label:{required:!0}},validateMessages:{required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},labelCol:{style:{width:"150px"}}}},created(){},methods:{createRecord(d){this.modal.data={},this.modal.data.organization_id=this.$page.props.current_organization.id,this.modal.data.media=[],this.modal.mode="CREATE",this.modal.isOpen=!0},editRecord(d){this.modal.data={...d},this.modal.mode="EDIT",this.modal.isOpen=!0},storeRecord(){console.log(this.modal.data),this.$refs.modalRef.validateFields().then(()=>{this.$inertia.post(route("manage.approbates.store"),this.modal.data,{onSuccess:d=>{this.modal.isOpen=!1},onError:d=>{console.log(d)}})}).catch(d=>{console.log(d)})},updateRecord(){console.log(this.modal.data),this.$refs.modalRef.validateFields().then(()=>{this.modal.data._method="PATCH",this.$inertia.post(route("manage.approbates.update",this.modal.data.id),this.modal.data,{onSuccess:d=>{this.modal.isOpen=!1,console.log(d)},onError:d=>{console.log(d)}})}).catch(d=>{console.log("error",d)})},deleteRecord(d){confirm("Are you sure want to remove?")&&this.$inertia.delete(route("manage.approbates.destroy",d.id),{onSuccess:t=>{console.log(t)},onError:t=>{alert(t.message)}})}}},M=p("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," 表格管理 ",-1),N={key:0},V=p("svg",{focusable:"false",class:"","data-icon":"delete",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",viewBox:"64 64 896 896"},[p("path",{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"})],-1),H=["src"];function L(d,t,k,P,e,m){const u=i("a-button"),x=i("a-table"),v=i("a-input"),n=i("a-form-item"),y=i("quill-editor"),b=i("a-date-picker"),R=i("a-switch"),C=i("inertia-link"),E=i("upload-outlined"),w=i("a-upload"),O=i("a-form"),U=i("a-modal"),q=i("OrganizationLayout");return r(),f(q,{title:"Dashboard"},{header:l(()=>[M]),default:l(()=>[p("button",{onClick:t[0]||(t[0]=o=>m.createRecord()),class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded my-3"},"新增表格"),a(x,{dataSource:k.approbates,columns:e.columns},{bodyCell:l(({column:o,text:j,record:c,index:G})=>[o.dataIndex=="operation"?(r(),_(g,{key:0},[a(u,{onClick:I=>m.editRecord(c)},{default:l(()=>[s("修改")]),_:2},1032,["onClick"]),a(u,{onClick:I=>m.deleteRecord(c)},{default:l(()=>[s("刪除")]),_:2},1032,["onClick"])],64)):(r(),_(g,{key:1},[s(F(c[o.dataIndex]),1)],64))]),_:1},8,["dataSource","columns"]),a(U,{visible:e.modal.isOpen,"onUpdate:visible":t[10]||(t[10]=o=>e.modal.isOpen=o),title:e.modal.mode=="CREATE"?"新增":"修改",width:"60%"},{footer:l(()=>[e.modal.mode=="EDIT"?(r(),f(u,{key:"Update",type:"primary",onClick:t[8]||(t[8]=o=>m.updateRecord())},{default:l(()=>[s("更新")]),_:1})):h("",!0),e.modal.mode=="CREATE"?(r(),f(u,{key:"Store",type:"primary",onClick:t[9]||(t[9]=o=>m.storeRecord())},{default:l(()=>[s("新增")]),_:1})):h("",!0)]),default:l(()=>[a(O,{ref:"modalRef",model:e.modal.data,name:"From","label-col":{span:6},"wrapper-col":{span:18},autocomplete:"off",rules:e.rules,"validate-messages":e.validateMessages},{default:l(()=>[a(n,{label:"Name",name:"name"},{default:l(()=>[a(v,{value:e.modal.data.name,"onUpdate:value":t[1]||(t[1]=o=>e.modal.data.name=o)},null,8,["value"])]),_:1}),a(n,{label:"Title",name:"title"},{default:l(()=>[a(v,{value:e.modal.data.title,"onUpdate:value":t[2]||(t[2]=o=>e.modal.data.title=o)},null,8,["value"])]),_:1}),a(n,{label:"Description",name:"description"},{default:l(()=>[a(y,{value:e.modal.data.description,"onUpdate:value":t[3]||(t[3]=o=>e.modal.data.description=o),style:{"min-height":"200px"}},null,8,["value"])]),_:1}),a(n,{label:"Start Date",name:"start_date"},{default:l(()=>[a(b,{value:e.modal.data.start_date,"onUpdate:value":t[4]||(t[4]=o=>e.modal.data.start_date=o),bordered:!1},null,8,["value"])]),_:1}),a(n,{label:"End Date",name:"end_date"},{default:l(()=>[a(b,{value:e.modal.data.end_date,"onUpdate:value":t[5]||(t[5]=o=>e.modal.data.end_date=o),bordered:!1},null,8,["value"])]),_:1}),a(n,{label:"Active",name:"active"},{default:l(()=>[a(R,{checked:e.modal.data.active,"onUpdate:checked":t[6]||(t[6]=o=>e.modal.data.active=o),unCheckedValue:0,checkedValue:1},null,8,["checked"])]),_:1}),a(n,{label:"Banner image",name:"cert_logo"},{default:l(()=>[e.modal.data.media.length?(r(),_("div",N,[a(C,{href:d.route("manage.form.deleteMedia",e.modal.data.media[0].id),class:"float-right text-red-500"},{default:l(()=>[V]),_:1},8,["href"]),p("img",{src:"/media/form/"+e.modal.data.media[0].id+"/"+e.modal.data.media[0].file_name,width:"100"},null,8,H)])):h("",!0),a(w,{"file-list":e.modal.data.image,"onUpdate:fileList":t[7]||(t[7]=o=>e.modal.data.image=o),multiple:!1,beforeUpload:()=>!1,"max-count":1,"list-type":"picture"},{default:l(()=>[a(u,null,{default:l(()=>[a(E),s(" upload ")]),_:1})]),_:1},8,["file-list"])]),_:1})]),_:1},8,["model","rules","validate-messages"])]),_:1},8,["visible","title"])]),_:1})}const ae=z(B,[["render",L]]);export{ae as default};
